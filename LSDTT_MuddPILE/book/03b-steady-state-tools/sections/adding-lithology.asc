=== Adding lithology

If we want to add lithology (or, alternativly, spatially varying erodibility), we use some different parameterrs in the driver file:

[source,console]
----
# These are parameters for the file i/o
read fname: test_data
write fname: test_data

read_initial_raster: true
carve_before_fill: true

snap_to_steady_variable_variable_K_variable_U: true

variable_U_name: U_raster_prefix
variable_K_name: K_raster_prefix

# The data that you want printed to file
write_hillshade: true
----

The `U_raster_prefix` is the prefix of a raster (in ENVI bil format) without the extension. This needs to be the same size as the elevation raster. 

In some cases, the snapped topography has large ridges between basins, so we use iterative snapping to migrate the divides. 

[source,console]
----
# These are parameters for the file i/o
read fname: test_data
write fname: test_data

read_initial_raster: true
carve_before_fill: true

snap_to_steady_variable_variable_K_variable_U: true

variable_U_name: U_raster_prefix
variable_K_name: K_raster_prefix

cycle_fluvial_snapping: true
print_snapped_to_steady_frame: true
snapping_cycles: 30
snap_print_rate: 10

# The data that you want printed to file
write_hillshade: true
----

The `snapping_cycles` indicates how many times you want to iterate on the fluvial network. The `snapping_print_rate` indicates how frequently you want the snapped model to print to a raster. 

Like in the basic raster snapping, you can add a `snap_to_critical_slopes` paramater.  

=== Three dimensional lithology

If you want to use a full three dimensional lithologic dataset, we have a final option `snap_to_steady_variable_variable_K_variable_U_use_LithoCube`

[source,console]
----
# These are parameters for the file i/o
read fname: Switz_IsolateFixedChannel
write fname: Switz_LithoSnap_750BL_SMM

# General DEM stuff (and the fixed channel)
channel heads fname: NULL
read_initial_raster: true
carve_before_fill: true
fixed_channel_csv_name: single_channel_nodes_dropped_750m.csv

# Forcings
rudimentary_steady_forcing_uplift: 0.0001

# Lithocube parameters
load_lithology: true
only_test_lithology: false
vo_filename: vo_100m_20191031_UTM.vo
vo_asc_filename: vo_100m_20191031vo_export4_20191031
print_K_raster: true
print_lithocode_raster: true
print_Sc_raster: true

# Critical slope parameters
cycle_fluvial_snapping: true
print_snapped_to_steady_frame: true
snapping_cycles: 500
snap_print_rate: 50
snap_to_steady_critical_slopes_use_LithoCube: true
threshold_contributing_pixels: 200

elevation_change: -750
----

The `lithocube` parameters relate to data generated by GOCAD. You can see options to print the _K_ and critical slope data produced by these.  
