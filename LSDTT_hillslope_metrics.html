<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<meta name="author" content="Stuart W.D. Grieve, QUeen Mary Univetrsity London, Simon M. Mudd, University of Edinburgh, and Martin D. Hurst, University of Glasgow">
<title>Hillslope metrics in LSDTopoTools</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Hillslope metrics in LSDTopoTools</h1>
<div class="details">
<span id="author" class="author">Stuart W.D. Grieve, QUeen Mary Univetrsity London, Simon M. Mudd, University of Edinburgh, and Martin D. Hurst, University of Glasgow</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction_to_advanced_hillslope_analysis">1. Introduction to advanced hillslope analysis</a>
<ul class="sectlevel2">
<li><a href="#_background_reading">1.1. Background reading</a></li>
</ul>
</li>
<li><a href="#_coupling_hillslope_and_channel_analysis">2. Coupling hillslope and channel analysis</a>
<ul class="sectlevel2">
<li><a href="#_getting_lsdtopotools2">2.1. Getting <strong>LSDTopoTools2</strong></a></li>
<li><a href="#_running_the_analysis">2.2. Running the analysis</a>
<ul class="sectlevel3">
<li><a href="#_getting_channel_information">2.2.1. Getting channel information</a></li>
<li><a href="#_making_spaghetti_i_e_doing_the_full_analysis">2.2.2. Making spaghetti (i.e., doing the full analysis)</a></li>
</ul>
</li>
<li><a href="#_coupled_hillslope_and_channel_ananylsis_options_and_outfiles">2.3. Coupled hillslope and channel ananylsis: options and outfiles</a>
<ul class="sectlevel3">
<li><a href="#_input_options">2.3.1. Input options</a></li>
<li><a href="#_burning_rasters_to_csv">2.3.2. Burning rasters to csv</a></li>
<li><a href="#_output_files">2.3.3. Output files</a></li>
</ul>
</li>
<li><a href="#_visualising_the_coupled_hillslope_channel_analysis">2.4. Visualising the coupled hillslope-channel analysis</a></li>
<li><a href="#_summary">2.5. Summary</a></li>
</ul>
</li>
<li><a href="#_legacy_code_selecting_a_window_size">3. Legacy code: Selecting A Window Size</a>
<ul class="sectlevel2">
<li><a href="#_overview">3.1. Overview</a></li>
<li><a href="#_input_data">3.2. Input Data</a></li>
<li><a href="#_compile_the_driver">3.3. Compile The Driver</a></li>
<li><a href="#_run_the_code">3.4. Run The Code</a></li>
<li><a href="#_the_output_data">3.5. The Output Data</a></li>
<li><a href="#_using_python_to_select_a_window_size">3.6. Using Python To Select A Window Size</a></li>
</ul>
</li>
<li><a href="#_legacy_code_extracting_hillslope_lengths">4. Legacy code: Extracting Hillslope Lengths</a>
<ul class="sectlevel2">
<li><a href="#_overview_2">4.1. Overview</a></li>
<li><a href="#_input_data_2">4.2. Input Data</a></li>
<li><a href="#_compile_the_driver_2">4.3. Compile The Driver</a></li>
<li><a href="#_run_the_hillslope_length_driver">4.4. Run The Hillslope Length Driver</a></li>
<li><a href="#_analysing_the_results">4.5. Analysing The Results</a>
<ul class="sectlevel3">
<li><a href="#_prefix_paper_data_txt">4.5.1. &lt;Prefix&gt;_Paper_Data.txt</a></li>
<li><a href="#_prefix_hilltopdata_csv">4.5.2. &lt;Prefix&gt;_HilltopData.csv</a></li>
<li><a href="#_trace_files">4.5.3. Trace Files</a></li>
</ul>
</li>
<li><a href="#_worked_example">4.6. Worked Example</a>
<ul class="sectlevel3">
<li><a href="#_getting_the_data">4.6.1. Getting the data</a></li>
<li><a href="#_getting_the_code">4.6.2. Getting The Code</a></li>
<li><a href="#_running_the_code">4.6.3. Running The Code</a></li>
<li><a href="#_plotting_data">4.6.4. Plotting Data</a></li>
</ul>
</li>
<li><a href="#_summary_2">4.7. Summary</a></li>
</ul>
</li>
<li><a href="#_legacy_code_dimensionless_erosion_and_relief">5. Legacy code: Dimensionless Erosion and Relief</a>
<ul class="sectlevel2">
<li><a href="#_get_the_code_for_dimensionless_erosion_and_relief_analysis">5.1. Get the code for dimensionless erosion and relief analysis</a>
<ul class="sectlevel3">
<li><a href="#_clone_the_github_repository">5.1.1. Clone the GitHub repository</a></li>
<li><a href="#_alternatively_get_the_zipped_code">5.1.2. Alternatively, get the zipped code</a></li>
<li><a href="#_get_the_python_code">5.1.3. Get the Python code</a></li>
<li><a href="#_checking_your_python_package_versions">5.1.4. Checking your Python package versions</a></li>
<li><a href="#_get_the_example_datasets">5.1.5. Get the example datasets</a></li>
</ul>
</li>
<li><a href="#_processing_high_resolution_topography">5.2. Processing High Resolution Topography</a></li>
<li><a href="#_input_data_3">5.3. Input Data</a></li>
<li><a href="#_compile_the_driver_3">5.4. Compile The Driver</a></li>
<li><a href="#_run_the_code_2">5.5. Run the code</a></li>
<li><a href="#_analyzing_dimensionless_relationships">5.6. Analyzing Dimensionless Relationships</a>
<ul class="sectlevel3">
<li><a href="#_density_plot">5.6.1. Density Plot</a></li>
<li><a href="#_hilltop_patch_plot">5.6.2. Hilltop Patch Plot</a></li>
<li><a href="#_binned_plot">5.6.3. Binned Plot</a></li>
<li><a href="#_fitting_the_critical_gradient">5.6.4. Fitting The Critical Gradient</a></li>
</ul>
</li>
<li><a href="#_summary_3">5.7. Summary</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="images/LSD-logo.png" alt="LSD logo" width="200">
</div>
</div>
<div class="paragraph">
<p><a href="index.html">Return to main <strong>LSDTopoTools</strong> landing page</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction_to_advanced_hillslope_analysis">1. Introduction to advanced hillslope analysis</h2>
<div class="sectionbody">
<div class="sidebarblock">
<div class="content">
<div class="title">Basic hillslope metrics</div>
<div class="paragraph">
<p>If you are looking for basic metrics like slope, curvature and aspect, you should follow the link below:</p>
</div>
<div class="paragraph">
<p><a href="LSDTT_basic_usage.html">Basic topographic analyis in <strong>LSDTopoTools</strong></a></p>
</div>
</div>
</div>
<div class="paragraph">
<p>In this document we will explore the analysis of hillslopes. The analyses here go beyond simple metrics like curvature and slope, and look at more subtle features of the landscape like channel length and dimensionless relief and curvature. We have used these metrics to understand both <a href="http://eps.berkeley.edu/~bill/papers/112.pdf">sediment flux laws</a> as well as the tectonic evolution of landscapes.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Before you start</div>
<div class="paragraph">
<p>Before you start you need to install <strong>LSDTopoTools</strong>. If you haven&#8217;t done that, please follow the link below.</p>
</div>
<div class="paragraph">
<p><a href="LSDTT_installation.html">Instructions on how to install LSDTopoTools</a></p>
</div>
<div class="paragraph">
<p>In addition, you will need to use some basic linux shell commands. If you have never done this before I suggest reading this brief introduction: <a href="LSDTT_using_linux.html">Basic use of the linux shell</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_background_reading">1.1. Background reading</h3>
<div class="paragraph">
<p>If you wish to explore some background reading, a good place to look at how topography can be used to test theories about sediment transport is a series of papers by <a href="https://blogs.uoregon.edu/jroering/">Josh Roering</a> and colleagues:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://blogs.uoregon.edu/jroering/files/2014/11/2007RoeringReliefEPSL-13x5qn2.pdf">Roering, J.J., J.T. Perron, and J.W. Kirchner, (2007), Functional relationships between denudation and hillslope form and relief, <em>Earth and Planetary Science Letters</em>, <strong>v. 264</strong>, p. 245-258.</a></p>
</li>
<li>
<p><a href="http://blogs.uoregon.edu/jroering/files/2014/11/2008RoeringHillslopeModelGSABull-23d6bjq.pdf">Roering, J.J., (2008), How well can hillslope evolution models ‘explain’ topography? Simulating soil transport and production with high-resolution topographic data, <em>Geological Society of America Bulletin</em>, <strong>120</strong>, p. 1248-1262.</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We used some of the concepts in those papers to show that ridgetop curvature was a useful metric to quantfy erosion rates as well as find signals of landscape transience:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://onlinelibrary.wiley.com/doi/10.1029/2011JF002057/full">Hurst, M. D., S. M. Mudd, R. Walcott, M. Attal, and K. Yoo (2012), Using hilltop curvature to derive the spatial distribution of erosion rates, <em>J. Geophys. Res.</em>, <strong>117</strong>, F02017, doi: 10.1029/2011JF002057.</a></p>
</li>
<li>
<p><a href="http://science.sciencemag.org/content/341/6148/868">Hurst, M.D., S.M. Mudd, M. Attal and G. Hilley (2013), Hillslopes Record the Growth and Decay of Landscapes, <em>Science</em> <strong>341(6148)</strong>, 868-871, doi: 10.1126/science.1241791.</a></p>
</li>
<li>
<p><a href="http://onlinelibrary.wiley.com/doi/10.1002/esp.3923/abstract">Mudd, S. M. (2017) Detection of transience in eroding landscapes. <em>Earth Surf. Process. Landforms</em>, <strong>42</strong>, 24–41, doi: 10.1002/esp.3923.</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To understand landscape transience, and also explore sediment flux laws, hillslope length must also be known, and we have developed methods for quantifying hillslope lengths and linking them to ridgetop curvature:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://onlinelibrary.wiley.com/doi/10.1002/esp.3884/abstract">Grieve, S.W.D., S.M. Mudd, M.D. Hurst (2016), How long is a hillslope? <em>Earth Surf. Process. Landforms</em>, <strong>41</strong> 1039–1054, doi: 10.1002/esp.3884.</a></p>
</li>
<li>
<p><a href="https://www.earth-surf-dynam.net/4/309/2016/">Grieve, S.W.D., S.M. Mudd, M.D. Hurst, and D.T. Milodowski (2016) A nondimensional framework for exploring the relief structure of landscapes, <em>Earth Surf. Dynam.</em>, <strong>4</strong>, 309-325, doi: 10.5194/esurf-4-309-2016.</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_coupling_hillslope_and_channel_analysis">2. Coupling hillslope and channel analysis</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Hillslope erosion and the evolution of hillslope morphology though time is often driven by incision or deposition in channels. Tectonic signals can migrate upstream in channels in the form of knickpoints and knickzones, and as these pass the baes of a hillslope, the hillslope will begin to adjust from the base upwards. This can create complex spatial patterns in topographic metrics that may be used to decipher transient changes in the erosion of upland landscapes.</p>
</div>
<div class="paragraph">
<p>We have developed a series of tools for quantifying the spatial correspondence between channel steepness and hillslope properties.
Included in <strong>LSDTopoTools2</strong> is a program called <strong>lsdtt-hillslope-channel-coupling</strong>, which packages routines our group uses to detect coupled channel and hillslope evolution.</p>
</div>
<div class="paragraph">
<p>The code does a number of things.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It does basic analyses that replicates some of the functionality of <code>lsdtt-basic-metrics</code> and <code>lsdtt-chi-mapping</code> programs. In short, it can calculate surface fitting rasters such as slope, curvature and aspect, and it can extract the chi coordinate (a flow length normalised for drainage area).</p>
<div class="ulist">
<ul>
<li>
<p>If you want more information on <code>lsdtt-basic-metrics</code>, follow the <a href="LSDTT_basic_usage.html">instructions for basic LSDTT usage</a></p>
</li>
<li>
<p>If you want more information on <code>lsdtt-chi-mapping</code>, follow the <a href="LSDTT_chi_analysis.html">instructions for LSDTT chi analyis</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>It extracts ridgelines from a DEM and has various algorithms for filtering thses ridgelines. It also has algoirthms for splitting ridgelines into segments to perform some spatial averaging if that is what the user want.</p>
</li>
<li>
<p>It can perform hilltop flow routing, where flow routing is performed from the hilltops to either the channel, a floodplain, or a buffered channel network in order to link hilltop pixles to channel pixels.</p>
</li>
<li>
<p>It extracts basic channel networks and then can segment the channel network so that ridgetop pixels can be tagged against channel segments.</p>
</li>
<li>
<p>It then calculates a range of metrics associated with these hilltop traces. These include dimensionless relief (R*), dimensionless curvature (E*), and hillslope length.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These metrics can tell you quite a lot about the state of the landscape and we feel quite strongly that combining the hillslope and channel metrics can yeild a much richer picture of a landscape&#8217;s evolution than either channel or hillslope metrics alone. We very much hope that you will be able to apply these analysis tools to your own landscape. Below we provide some papers that can help you understand what the metrics mean.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Relevant publications for understanding what relief and curvature metrics mean</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Reference</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.sciencedirect.com/science/article/pii/S0012821X07006061">Roering et al., 2007</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This was the initial publication that set out the theory of E* vs R* analysis.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://agupubs.onlinelibrary.wiley.com/doi/10.1029/2011JF002057">Hurst et al., 2012</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This paper explored the relasionship between ridgetop curvature and first speculated as to the response of landscapes to transient incison in E* vs R* space.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://science.sciencemag.org/content/341/6148/868">Hurst et al., 2013</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This paper demonstrated that one could detect landscape transience using ass:[E*] vs R* data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.earth-surf-dynam.net/4/309/2016/">Grieve et al., 2016</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This paper automated extraction of E* R* metrics</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[Hurst et al., 2019]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The first publication that combines E* R* analysis with channel metrics.</p>
<p class="tableblock">These insructions will walk you through running the coulpled hillslope-channel analysis and explain the outputs of the code.</p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="_getting_lsdtopotools2">2.1. Getting <strong>LSDTopoTools2</strong></h3>
<div class="paragraph">
<p>The <code>lsdtt-hillslope-channel-coupling</code> program sits within <strong>LSDTopoTools2</strong>.
You can <a href="LSDTT_installation.html">follow our installation instructions</a>.</p>
</div>
<div class="paragraph">
<p>If you have installed <strong>LSDTopoTools2</strong> you will already have hillslope channel coupling routines, as well as the other programs necessary for carrying out the hillslope and channel analysis.</p>
</div>
</div>
<div class="sect2">
<h3 id="_running_the_analysis">2.2. Running the analysis</h3>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This analysis is perhaps the most complex thing you can do with <strong>LSDTopoTools</strong>. It requires a number of different components to be pulled together for the final product, and it works in a few steps because you need the output of one step to set the parameters for the next steps. So please be patient.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Here are the steps you need to follow:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You need to extract the channel network. It is actually important to get a proper channel network rather than just using some threshold drainge area, because the analysis is more robust if you are comparing basins of similar order and you can&#8217;t do that if you don&#8217;t know where the channels begin.</p>
</li>
<li>
<p>If you want, you can use that network to decide on the basins you want to explore. But you can also do that algorithmically.</p>
</li>
<li>
<p>You then need to determine the concavity of the channels because at some point you are going to calculate the steepness of the channels and for this you need a concavity. If you just need a first cut you can use 0.45, but we have tested for concavity in very many places and can assure you that it is highly variable.</p>
</li>
<li>
<p>Once you do those things you can then run the hillslope code. Be warned: this last step can take A VERY LONG TIME.</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_getting_channel_information">2.2.1. Getting channel information</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>First, you need to extract a channel network. If you have lidar data and you want to know exactly where the channels are, use one of our <a href="LSDTT_channel_extraction.html#_the_channel_extraction_tool">channel network algorithms</a>. The <a href="LSDTT_channel_extraction.html#_the_channel_extraction_tool">wiener method</a> is both <a href="https://agupubs.onlinelibrary.wiley.com/doi/abs/10.1002/2013WR015167">accurate</a> and <a href="https://www.earth-surf-dynam.net/4/627/2016/">does not vary much as a function of grid resolution</a> so we recommend using this method. If you do extract a channel network you will need the <code>channel heads csv file</code> to load into the next step.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>As a brief note, to get a Wiener network, you set the parameter <code>print_wiener_channels: true</code>.</p>
</li>
<li>
<p>The sources or channel heads file will have the extension <code>Wsources.csv</code>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Second, you should constrain the concavity index of the landscape. To do this use our <a href="LSDTT_chi_analysis.html#_calculating_concavity">concavity index tool</a>. Note that there are three main options for selecting basins:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>You can print a junction index raster and selects the junction numbers you want. This requires a junction file, which is a text file that simply lists the junction numbers you want, and you need to set the parameter <code>baselevel junctions fname: my_jncs.txt</code>. The text file can be a list of space or comma separated junctions.</p>
</li>
<li>
<p>You can create a csv file that has latitude and longitude of the basin outlets. To get this to work set the paramters <code>get_basins_from_outlets: true</code> and <code>basin_outlet_csv: test_basins2.csv</code>. Natually you will need to adjust the name of the file. The file <strong>MUST</strong> have a column named <code>latitude</code> and a column named <code>longitude</code> and these must be in WGS84 coordinates.</p>
</li>
<li>
<p>You can use the <a href="LSDTT_chi_analysis.html#_selecting_channels_and_basins">basin selection options</a>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Once you have a channel network and a concavity, <a href="LSDTT_chi_analysis.html#_getting_the_software">extract the segmented channel profile</a>. You need to make sure the switches <code>print_segments: true</code> and <code>print_segments_raster: true</code> are included in the parameter file</p>
</li>
<li>
<p>Once you have done all that, you should have a number of new files along with your original rasters. The ones needed for the channel-hillslope coupling are</p>
<div class="ulist">
<ul>
<li>
<p>The channel heads file if you are using an extracted channel network (a <code>HEADS.csv</code> file)</p>
</li>
<li>
<p>A channel segments raster <code>_SEGMENTS.bil</code> that is derived from the run of <strong>chi mapping tool</strong> with the <code>print_segments: true</code> and <code>print_segments_raster: true</code> parameters in the parameter file.</p>
</li>
</ul>
</div>
</li>
<li>
<p>These files are ingested by the code <code>lsdtt-hillslope-channel-coupling</code>, the instructions of which are below.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_making_spaghetti_i_e_doing_the_full_analysis">2.2.2. Making spaghetti (i.e., doing the full analysis)</h4>
<div class="paragraph">
<p>Wait, what is all this about spaghetti? One of the plots we make using the hillslope-channel analysis looks a bit like spaghetti, so we call these spaghetti plots. Hungry yet? It is better to run these analyses on a full stomach.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Quick reminder of LSDTopoTools2 installation</div>
<div class="paragraph">
<p>If any of the below steps don&#8217;t make sense, read the <a href="LSDTT_installation.html">full installation instructions</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Pull and run the docker container <code>lsdtt_pcl_docker</code></p>
</li>
<li>
<p>Run the shell script to start <strong>LSDTopoTools</strong>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console"># Start_LSDTT.sh</code></pre>
</div>
</div>
</li>
<li>
<p>You are ready to start analysing!</p>
</li>
</ol>
</div>
</div>
</div>
<div class="paragraph">
<p>Like all <strong>LSDTopoTools2</strong> code, you run the analysis with a parameter file. The format of these files is always the same.</p>
</div>
<div class="paragraph">
<p>We will walk you though an analysis on a test site so you can see how it works.</p>
</div>
<div class="paragraph">
<p>Please bear with us while we construct this documentation (SMM 20-June-2019).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_coupled_hillslope_and_channel_ananylsis_options_and_outfiles">2.3. Coupled hillslope and channel ananylsis: options and outfiles</h3>
<div class="sect3">
<h4 id="_input_options">2.3.1. Input options</h4>
<div class="paragraph">
<p>Like all <strong>LSDTopoTools</strong> programs, you can set parameters in the <strong>lsdtt-hillslope-channel-coupling</strong> that drive the analysis. Many of these are shared with other programs in the <strong>LSDTopoTools</strong> analysis suite.</p>
</div>
<div class="sect4">
<h5 id="_basic_file_input_and_output">Basic file input and output</h5>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. File input and output options. <strong>These do not have defaults and MUST be declared</strong>.</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Keyword</th>
<th class="tableblock halign-left valign-top">Input type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>THIS IS NOT A KEYWORD</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Null</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If you don&#8217;t enter the write path, read path or write fname, the program will assume that the read and write paths are the current directory, and the write fname is the same as the read fname.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">write path</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The path to which data is written. <strong>The code will NOT create a path: you need to make the write path before you start running the program.</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">read path</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The path from which data is read.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">write fname</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The prefix of rasters to be written <strong>without extension</strong>.
For example if this is <code>Test</code> and you have selected <code>bil</code> format then a fill operation will result in a file called <code>Test_Fill.bil</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">read fname</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The filename of the raster to be read without extension. For example if the raster is <code>MyRaster.bil</code>, read fname will be <code>MyRaster</code>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_dem_preprocessing">DEM preprocessing</h5>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. DEM preprocessing. These just help you clean data and perform very basic operations.</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Keyword</th>
<th class="tableblock halign-left valign-top">Input type</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">minimum_elevation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">float</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If you have the <code>remove_seas</code> keyword set to true, the program will change any elevation node below this value to NoData.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">maximum_elevation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">float</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">30000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If you have the <code>remove_seas</code> keyword set to true, the program will change any elevation node above this value to NoData.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">remove_seas</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, this changes extreme value in the elevation to NoData.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">min_slope_for_fill</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">float</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.001</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The minimum slope between pixels for use in the fill function.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">raster_is_filled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, the code assumes the raster is already filled and doesn&#8217;t perform the filling routine. This should save some time in computation, but make sure the raster really is filled or else you will get segmentation faults!</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">only_check_parameters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, this checks parameter values but doesn&#8217;t run any analyses. Mainly used to see if raster files exist.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_hilltop_parameters">Hilltop parameters</h5>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. These are used to select hilltops</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Keyword</th>
<th class="tableblock halign-left valign-top">Input type</th>
<th class="tableblock halign-left valign-top">default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">StreamNetworkPadding</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of pixels you want to pad the channel network. If a hillslope trace comes within this many pixels of the channel, the trace stops.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">min_stream_order_to_extract_basins</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum stream order for extracting basins (or the hilltops of those basins)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">max_stream_order_to_extract_basins</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum stream order for extracting basins (or the hilltops of those basins)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RemovePositiveHilltops</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Remove hilltops with positive curvature (i.e., that are concave)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RemoveSteepHilltops</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Remove hilltops that are steep. This is because steep (plunging) ridgetop will move into the nonlinear sediment transport regime and there will no longer be a linear relasionship between curvature and erosion rate at steady state. Basically if hilltops are too steep the assumptions of the analysis break down.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Threshold_Hilltop_Gradient</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">float</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <code>RemoveSteepHilltops</code> is <code>true</code>, then any hillslopes steeper than this will be removed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MaskHilltopstoBasins</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Need to ask Martin what this does.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_hilltop_analysis_and_printing_options">Hilltop analysis and printing options</h5>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. These are the different analyses and write options for the hilltops</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Keyword</th>
<th class="tableblock halign-left valign-top">Input type</th>
<th class="tableblock halign-left valign-top">default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">run_HFR_analysis</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <strong>true</strong>, run the entire hilltop flow routing analysis.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">write_hilltops</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <strong>true</strong>, write a raster of all the hilltops.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">write_hilltop_curvature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <strong>true</strong>, write a raster of hilltop curvature.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">write_hillslope_gradient</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <strong>true</strong>, write a raster of all hillslope gradient</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">write_hillslope_length</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <strong>true</strong>, write a raster of all hillslope length</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">write_hillslope_relief</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <strong>true</strong>, write a raster of all hillslope relief</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">print_hillslope_traces</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <strong>true</strong>, this writes the hillslope traces. Be warned: this is <strong>VERY</strong> computationally intensive.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">hillslope_trace_thinning</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A thinning factor. If it is 1, it writes everyu trace. If 2, every 2nd trace, if 3, ever thrid trace. And so on.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">hillslope_traces_file</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">""</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the hillslope traces file</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">hillslope_traces_basin_filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">I&#8217;m not sure what this does. Ask Martin or Stuart.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_filenames_for_channel_heads_floodplains_and_other_pre_computed_data">Filenames for channel heads, floodplains, and other pre-computed data</h5>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. Options for determining which channels and basins to analyse, including settings for the fill function.</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 50.0002%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Keyword</th>
<th class="tableblock halign-left valign-top">Input type</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ChannelSegments_file</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A file that has computed the channel segment numbers so that these segments can be linked to ridgetops. It is calculated <strong>UPDATE</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Floodplain_file</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A file that has 1 for floodplain and 0 elsewhere. Used to mask the floodplains so that hillslopes stop there. The format is <strong>UPDATE</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CHeads_file</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This reads a channel heads file. It will supercede the <code>threshold_contributing_pixels</code> flag. That is, if you give a valid CHeads filename the code will ignore the threshold pixels and use the sources in the file instead. You can calculate channel heads using our <a href="https://github.com/LSDtopotools/LSDTopoTools_ChannelExtraction">channel extraction tools</a>. The file needs to be a <strong>csv</strong> file and you pass the filename <strong>WITHOUT EXTENSION</strong>. The format of the filename is one with 5 columns: <code>node_index,row,col,x,y</code>. The <code>x,y</code> coordinates are in local UTM coordinates.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BaselevelJunctions_file</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">File containing a list of baselevel junctions to determine basins to analyse. The basin numbers should be on individual lines of the text file. You can see the junction numbers by printing the junction numbers to a csv with the command <code>print_junctions_to_csv</code>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_selecting_channels_and_basins">Selecting channels and basins</h5>
<div class="paragraph">
<p>There are a number of options for selecting channels and vasins. The basin selection is linked to extracting channel profile analysis and is not used for hillslop analysis.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 7. Options for determining which channels and basins to analyse, including settings for the fill function.</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 50.0002%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Keyword</th>
<th class="tableblock halign-left valign-top">Input type</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">threshold_contributing_pixels</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of pixels required to generate a channel (i.e., the source threshold).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">minimum_basin_size_pixels</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The minimum number of pixels in a basin for it to be retained. This operation works on the baselevel basins: subbasins within a large basin are retained.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">maximum_basin_size_pixels</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">500000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The maximum number of pixels in a basin for it to be retained. This is only used by <code>find_complete_basins_in_window</code> but that algorithm for selecting basins is the default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">find_complete_basins_in_window</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool (true or 1 will work)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>THIS IS THE DEFAULT METHOD! If you don&#8217;t want this method you need to set it to false.</strong> If this is true, it i) Gets all the basins in a DEM and takes those between the <code>minimum_basin_size_pixels</code> and <code>maximum_basin_size_pixels</code>. It then removes basins that are influenced by the edge of the DEM, and then removes nested basins. The reason for removing basins draining the edge is that all chi and S-A analysis requires that the basin is complete. If not, your area, and therefore chi coordinate, will be incorrect.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">find_largest_complete_basins</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool (true or 1 will work)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A boolean that, if set to true, will got through each baselevel node on the edge of the DEM and work upstream to keep the largest basin that is not influenced on its edge by nodata. <strong>This only operates if <code>find_complete_basins_in_window</code> is set to false!</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">test_drainage_boundaries</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool (true or 1 will work)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A boolean that, if set to true, will eliminate basins with pixels drainage from the edge. This is to get rid of basins that may be truncated by the edge of the DEM (and thus will have incorrect chi values). <strong>This only operates if BOTH <code>find_complete_basins_in_window</code> and <code>find_largest_complete_basins</code> are set to false!, OR if you are using a baselevel junctions file.</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">only_take_largest_basin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool (true or 1 will work)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this is true, a chi map is created based only upon the largest basin in the raster.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">print_basin_raster</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, prints a raster with the basins. <strong>IMPORTANT!</strong> This should be set to true if you want to use any of our <a href="https://github.com/LSDtopotools/LSDMappingTools">python plotting functions</a> that use basin information. Note that if this is true it will also print csv files with basin numbers and source numbers to assist plotting.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_printing_of_various_rasters">Printing of various rasters</h5>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 8. These are options for polynomial surface fitting.</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Keyword</th>
<th class="tableblock halign-left valign-top">Input type</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">surface_fitting_radius</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">float</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">30</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The radius of the polynomial window over which the surface is fitted. If you have lidar data, we have found that a radius of 5-8 metres works best.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">write_hillshade</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, prints the hillshade raster. The format of this is stupidly different from other printing calls for a stupid inheritance reason. Try to ignore. Most GIS routines have a hillshading options but for some reason they look crappier than our in-house hillshading. I&#8217;m not sure why but if you want a hillshade I recommend using this function.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">print_fill_raster</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, prints the filled topography.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">print_slope</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, prints the topographic gradient raster.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">print_aspect</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, prints the aspect raster.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">print_curvature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, prints the curvature raster.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">print_planform_curvature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, prints the planform curvature raster. That is the curvature of the countour lines.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">print_profile_curvature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, prints the profile curvature raster. That is the curvature along the line of steepest descent.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">print_stream_order_raster</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, prints the stream order raster (but printing this to csv is more efficient, use <code>print_channels_to_csv</code>).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">print_channels_to_csv</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prints the channel network to a csv file. Includes stream order and other useful information. Much more memory efficient than printing the whole raster. It prints <strong>all</strong> channel nodes across the DEM rather than printing nodes upstream of selected basins. <strong>If you want to see the channels selected for chi analysis use <code>print_chi_data_maps</code>.</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">print_junction_index_raster</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, prints the junction index raster (but printing this to csv is more efficient, use <code>print_junctions_to_csv</code>).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">print_junctions_to_csv</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prints the junction indices to a csv file. Much more memory efficient than printing the whole raster.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">convert_csv_to_geojson</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, this converts any csv file (except for slope-area data) to geojson format. This format takes up much more space than csv (file sizes can be 10x larger) but is georeferenced and can be loaded directly into a GIS. Also useful for webmapping. It assumes your raster is in UTM coordinates, and prints points with latitude and longitude in WGS84.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_basic_parameters_for_the_chi_coordinate">Basic parameters for the chi coordinate</h5>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 9. Parameters for calculating the chi coordinate.</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Keyword</th>
<th class="tableblock halign-left valign-top">Input type</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">A_0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">float</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <em>A<sub>0</sub></em> parameter (which nondimensionalises area) for chi analysis. This is in m<sup>2</sup>. Note that when <em>A<sub>0</sub></em> = 1 then the slope in chi space is the same as the channel steepness index (often denoted by <em>k<sub>s</sub></em>).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">m_over_n</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">float</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <em>m/n</em> parameter (sometimes known as the concavity index) for calculating chi. Note that if you do any <em>m/n</em> analysis (either <code>calculate_MLE_collinearity</code> or <code>print_profiles_fxn_movern_csv</code>) this <em>m/n</em> value will be replaced.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">threshold_pixels_for_chi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For most calculations in the <strong>chi_mapping_tool</strong> chi is calculated everywhere, but for some printing operations, such as printing of basic chi maps (<code>print_simple_chi_map_with_basins_to_csv</code>, <code>print_chi_coordinate_raster</code>, <code>print_simple_chi_map_to_csv</code>) you don&#8217;t want chi everywhere (this is especially true when writing a simple csv file) so we have this parameter that sets chi to NoData below these threshold contributing pixels. If this is greater than <code>threshold_contributing_pixels</code> it will default to <code>threshold_contributing_pixels</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">print_chi_data_maps</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>This needs to be true for python visualisation.</strong> If true, prints a raster with latitude, longitude and the chi coordinate, elevation, flow distance, drainage area, source key and baselevel keys to a csv file with the extension <code>_chi_data_map.csv</code>. Many of our <a href="https://github.com/LSDtopotools/LSDMappingTools">visualisation scripts</a> rely on this file.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_burning_rasters_to_csv">2.3.2. Burning rasters to csv</h4>
<div class="paragraph">
<p>In some circumstances you might want to "burn" secondary data onto your data of the channel network. One example would be if you had a geologic map and wanted to add the rock type as a column to point data about your channels. These routines will take a raster and will add the data values from that raster to each point in the chi data.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
At the moment the burning function only works for the <code>print_chi_data_maps</code> routine.
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 10. Parameters for burning a raster to csv files.</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Keyword</th>
<th class="tableblock halign-left valign-top">Input type</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">burn_raster_to_csv</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, takes raster data and appends it to csv data of channel points.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">burn_raster_prefix</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The prefix of the raster (without the <code>bil</code> extension) that contains the data to be burned. Does not include the directory path. The raster <strong>MUST</strong> be in the same directory as your input DEM.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">burn_data_csv_column_header</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">burned_data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The column header for your burned data. If you want our python plotting tools to be happy, <strong>do not give this a name with spaces</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">secondary_burn_raster_to_csv</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is for a second burn raster. If true, takes raster data and appends it to csv data of channel points.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">secondary_burn_raster_prefix</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is for a second burn raster. The prefix of the raster (without the <code>bil</code> extension) that contains the data to be burned. Does not include the directory path. The raster <strong>MUST</strong> be in the same directory as your input DEM.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">secondary_burn_data_csv_column_header</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">burned_data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is for a second burn raster. The column header for your burned data. If you want our python plotting tools to be happy, <strong>do not give this a name with spaces</strong>.</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="_parameters_for_segmentation_of_channels">Parameters for segmentation of channels</h5>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 11. Parameters for calculating the segments of similar chi slope (\(M_{\chi}\)). Details can be found in <a href="http://onlinelibrary.wiley.com/doi/10.1002/2013JF002981/abstract">Mudd et al., JGR-ES 2014</a>.</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Keyword</th>
<th class="tableblock halign-left valign-top">Input type</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">n_iterations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of iterations of random sampling of the data to construct segments. The sampling probability of individual nodes is determined by the skip parameter. Note that if you want to get a deterministic sampling of the segments you need to set this to 1 and set <code>skip</code> to 0. If you are using Monte Carlo sampling you should set this to at least 20 (but probably not more than 100).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">target_nodes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">80</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of nodes in a segment finding routine. Channels are broken into subdomains of around this length and then segmenting occurs on these subdomains. This limit is required because of the computational expense of segmentation, which goes as the factorial (!!!) of the number of nodes. Select between 80-120. A higher number here will take <strong>much</strong> longer to compute.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">minimum_segment_length</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The minimum length of a segment in sampled data nodes. The actual length is approximately this parameter times (1+skip). Note that the computational time required goes nonlinearly up the smaller this number. Note that this sets the shortest knickzone you can detect, although the algorithm can detect waterfalls where there is a jump between segments.  It should be between 6-20.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">maximum_segment_length</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The maximum length of a segment in sampled data nodes. The actual length is approximately this parameter times (1+skip). A cutoff value for very large DEMs.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">skip</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">During Monte Carlo sampling of the channel network, nodes are sampled by skipping nodes after a sampled node. The skip value is the mean number of skipped nodes after each sampled node. For example, if skip = 1, on average every other node will be sampled. Skip of 0 means every node is sampled (in which case the n_iterations should be set to 1, because there will be no variation in the fit between iterations). If you want Monte Carlo sampling, set between 1 and 4.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sigma</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">float</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This represents the variability in elevation data (if the DEM has elevation in metres, then this parameter will be in metres). It should include both uncertainty in the elevation data as well as the geomorphic variability: the size of roughness elements, steps, boulders etc in the channel that may lead to a channel profile diverging from a smooth long profile. That is, it is not simply a function of the uncertainty of the DEM, but also a function of topographic roughness so will be greater than the DEM uncertainty.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">n_nodes_to_visit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The chi map starts with the longest channel in each basin and then works in tributaries in sequence. This parameter determines how many nodes onto a receiver channel you want to go when calculating the chi slope at the bottom of a tributary.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">print_segments</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, this gives each segment a unique ID that is written to the <code>segmented_M_chi_map</code> (use <code>print_segmented_M_chi_map_to_csv: true</code>).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">print_segments_raster</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, this gives each segment a unique ID and prints to raster. <strong>For this to work <code>print_segments</code> must be true.</strong> We use this to map other landscape metrics, such as various hillslope metrics, to channel segments.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">print_segmented_M_chi_map_to_csv</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, prints a csv file with latitude, longitude and a host of chi information including the chi slope, chi intercept, drainage area, chi coordinate and other features of the drainage network. The \(M_{\chi}\) values are calculated with the segmentation algorithm of <a href="http://onlinelibrary.wiley.com/doi/10.1002/2013JF002981/abstract">Mudd et al. 2014</a>.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_output_files">2.3.3. Output files</h4>
<div class="paragraph">
<p>The two main output files are once called <code>_MChiSegmented.csv</code> and one called <code>_HilltopData.csv</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>_MChiSegmented.csv</code>: This file is almost identical to the one produced using <a href="LSDTT_chi_analysis.html#_point_data_usually_output_as_csv">channel steepness tools</a>, execpt it has a final column with a <code>segment_number</code> that is used to link hilltops to channels.</p>
</li>
<li>
<p><code>_HilltopData.csv</code>: This contains data from hillslope traces. These tend to be <strong>very large</strong>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_visualising_the_coupled_hillslope_channel_analysis">2.4. Visualising the coupled hillslope-channel analysis</h3>
<div class="paragraph">
<p>Under construction.</p>
</div>
</div>
<div class="sect2">
<h3 id="_summary">2.5. Summary</h3>
<div class="paragraph">
<p>By now you should be able to generate analysis that links hillslope and channel metrics.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_legacy_code_selecting_a_window_size">3. Legacy code: Selecting A Window Size</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This section is legacy code. You can now perform this operation in <strong>lsdtt-basic-metrics</strong>. See <a href="LSDTT_basic_usage.html">Basic topographic analyis in <strong>LSDTopoTools</strong></a>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Many of the operations on hillslopes involve selecting a characteristic window size for fitting the surface topograpy.</p>
</div>
<div class="paragraph">
<p>These instructions will take you through the steps needed to identify the correct
window radius to use in the surface fitting routines, following
the techniques published in <a href="http://www.sciencedirect.com/science/article/pii/S0012821X10004784">Roering et al. (2010)</a>
and <a href="http://onlinelibrary.wiley.com/doi/10.1029/2011JF002057/full">Hurst et al. (2012)</a>.  This analysis is often a precursor to other
more complex processes, and will ensure that fitted surfaces capture topographic
variations at a meaningful geomorphic scale.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Quick guide if you already know what you are doing</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Compile the code with: <code>make -f PolyFitWindowSize.make</code></p>
</li>
<li>
<p>Run the program <code>PolyFitWindowSize.out</code> using the path (with trailing slash), the
filename and the file format as arguments.</p>
</li>
<li>
<p>Analyse the resulting data files using the provided python script, <code>Window_Size.py</code>.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_overview">3.1. Overview</h3>
<div class="paragraph">
<p>This driver file will run the surface fitting routines at a range of window sizes up to 100 meters, to
produce a series of curvature rasters for the supplied landscape. The mean, interquartile range,
and standard deviation of each curvature raster is calculated and these values are
written to a text file.</p>
</div>
<div class="paragraph">
<p>The resulting text file can then be loaded by the provided python script, <code>Window_Size.py</code>,
which will produce plots of how the mean, interquartile range, and standard deviation
of curvature varies with the surface fitting window size.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">This code will produce</dt>
<dd>
<p>A <code>*.txt</code> file containing the surface statistics for each window size.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_input_data">3.2. Input Data</h3>
<div class="paragraph">
<p>This driver only requires an input DEM, this file can be at any resolution and must be
in <code>*.bil</code>, <code>flt</code> or <code>asc</code>. format. Guidance on converting data into these formats
can be found in the chapter covering basic <a href="#GDAL">[GDAL]</a> operations. Note that as data
resolution decreases (i.e. pixel size increases) the ability to resolve individual
hillslopes reduces, and so this technique becomes less important.</p>
</div>
</div>
<div class="sect2">
<h3 id="_compile_the_driver">3.3. Compile The Driver</h3>
<div class="paragraph">
<p>The code is compiled using the provided makefile, <code>PolyFitWindowSize.make</code> and the command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ make -f PolyFitWindowSize.make</code></pre>
</div>
</div>
<div class="paragraph">
<p>Which will create the binary file, <code>PolyFitWindowSize.out</code> to be executed.</p>
</div>
</div>
<div class="sect2">
<h3 id="_run_the_code">3.4. Run The Code</h3>
<div class="paragraph">
<p>The driver is run with three arguments:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Path</dt>
<dd>
<p>The path pointing to where the input raster file is stored. This is also
where the output data will be written.</p>
</dd>
<dt class="hdlist1">Filename</dt>
<dd>
<p>The filename prefix, without an underscore. If the DEM is called <code>Oregon_DEM.flt</code>
the filename would be <code>Oregon_DEM</code>. This will be used to give the output files a distinct identifier.</p>
</dd>
<dt class="hdlist1">Format</dt>
<dd>
<p>The input file format. Must be either <code>bil</code>, <code>flt</code> or <code>asc</code>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The syntax on a unix machine is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ ./PolyFitWindowSize.out &lt;path to data file&gt; &lt;Filename&gt; &lt;file format&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>And a complete example (your path and filenames may vary):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ ./PolyFitWindowSize.out /home/s0675405/DataStore/Final_Paper_Data/NC/ NC_DEM flt</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_the_output_data">3.5. The Output Data</h3>
<div class="paragraph">
<p>The final outputs are stored in a plain text file, <code>&lt;Filename&gt;_Window_Size_Data.txt</code>,
which is written to the data folder supplied as an argument.</p>
</div>
<div class="paragraph">
<p>This file contains the data needed to select the correct window size. The file has the the
following columns, from left to right:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Length_scale</dt>
<dd>
<p>The window size used in the surface fitting routines to generate
this row of data.</p>
</dd>
<dt class="hdlist1">Curv_mean</dt>
<dd>
<p>Mean curvature for the landscape.</p>
</dd>
<dt class="hdlist1">Curv_stddev</dt>
<dd>
<p>Standard deviation of curvature for the landscape.</p>
</dd>
<dt class="hdlist1">Curv_iqr</dt>
<dd>
<p>Interquartile range of curvature for the landscape.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_using_python_to_select_a_window_size">3.6. Using Python To Select A Window Size</h3>
<div class="paragraph">
<p>The latest version of the python scripts which accompany this analysis driver can be found
<a href="https://github.com/sgrieve/GeneralAnalysis">here</a> and provide a complete framework to select
a window size for surface fitting.</p>
</div>
<div class="paragraph">
<p>Once the driver has been run, and the data file, <code>&lt;Filename&gt;_Window_Size_Data.txt</code>,
has been generated, the python script can be executed using:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ python Window_Size.py &lt;Path&gt; &lt;Data Filename&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The two input arguments are similar to the driver file&#8217;s inputs:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Path</dt>
<dd>
<p>The full path to where the data file is stored, with a trailing slash. E.g.
<code>/home/data/</code>. This is also where the output plot will be written.</p>
</dd>
<dt class="hdlist1">Data Filename</dt>
<dd>
<p>The filename of the data file generated by the driver.
E.g. <code>Orgeon_DEM_Window_Size_Data.txt</code>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>A complete example (your path and filenames will be different):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ python Window_Size.py /home/data/ Oregon_DEM_Window_Size_Data.txt</code></pre>
</div>
</div>
<div class="paragraph">
<p>The plot generated by the python script can be interpreted to select a valid window
size for the surface fitting routine. For discussions about this technique refer to
<a href="http://www.sciencedirect.com/science/article/pii/S0012821X10004784">Roering et al. (2010)</a>
and <a href="http://onlinelibrary.wiley.com/doi/10.1029/2011JF002057/full">Hurst et al. (2012)</a>.
The plot generated should look similar to this example taken from the Gabilan Mesa test dataset, available from the ExampleTopoDatasets repository:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/WindowSizeFig.png" alt="Example window size plot">
</div>
</div>
<div class="paragraph">
<p>The plot is divided into three sections. The top plot is the change in the interquartile
range of curvature with window size, the middle plot is the change in mean curvature
with window size and the bottom plot is the change in the standard deviation of
curvature with window size.</p>
</div>
<div class="paragraph">
<p><a href="http://www.sciencedirect.com/science/article/pii/S0012821X10004784">Roering et al. (2010)</a>
and <a href="http://onlinelibrary.wiley.com/doi/10.1029/2011JF002057/full">Hurst et al. (2012)</a>
suggest that a clear scaling break can be observed in some or all of these three plots,
which characterizes the transition from a length scale which captures meter-scale features
such as tree throw mounds to a length scale which corresponds to individual hillslopes.</p>
</div>
<div class="paragraph">
<p>Care must be taken when using this technique as it is challenging to differentiate between measurement noise
and topographic roughness (e.g. tree throw mounds) in data if the shot density of the point cloud
from which the DEM is generated it too low or it has been poorly gridded. Pay close attention
to the metadata provided with your topographic data. If none is provided this is probably a bad sign!</p>
</div>
<div class="paragraph">
<p>In our example, a length scale of between 4 and 8 meters would be appropriate, supported by
the scaling breaks identified in the plots with the red arrows:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/WindowSizeFigAnnotated.png" alt="Example window size plot">
</div>
</div>
<div class="paragraph">
<p>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_legacy_code_extracting_hillslope_lengths">4. Legacy code: Extracting Hillslope Lengths</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section gives an overview of how to use the hillslope length driver (<strong>LH_Driver.cpp</strong>)
and it&#8217;s companion (<strong>LH_Driver_RAW.cpp</strong>) to quickly generate hillslope length data for a
series of basins, along with other basin average metrics within a larger DEM file.</p>
</div>
<div class="paragraph">
<p>For applications considering landscapes at geomorphic (millenial) timescales use the main
driver, for event scale measurements use the RAW driver. All instructions on this page will
work for either driver. For convenience it will refer only to <code>LH_Driver.cpp</code> but either driver
can be used.</p>
</div>
<div class="paragraph">
<p>This code is used to to produce the data for Grieve et al. (in review.).</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Quick guide if you already know what you are doing</div>
<div class="paragraph">
<p>Here is a quick overview of how to set up and run the code, if you have done it before:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Generate a channel head file for the landscape.</p>
</li>
<li>
<p>Get the window size for the surface fitting routines.</p>
</li>
<li>
<p>Compile the code with: <code>make -f LH_Driver.make</code></p>
</li>
<li>
<p>Run the program <code>LH_Driver.out</code> using the path (with trailing slash), the filename prefix, window radius, basin order, a floodplain switch, and a switch to write rasters if desired as arguments.</p>
</li>
<li>
<p>Analyse the resulting data files using python.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_overview_2">4.1. Overview</h3>
<div class="paragraph">
<p>This driver file will combine several LSDTopoTools Functions in order to generate
as complete a range of basin average and hillslope length metrics as possible. The tool will
generate:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A HilltopData file with metrics calculated for each hilltop pixel which can be routed to a stream pixel.</p>
</li>
<li>
<p>A file containing basin averaged values of hillslope lengths and other standard metrics.</p>
</li>
<li>
<p>An optional collection of trace files, which can be processed to create a shapefile of the trace paths across the landscape.
These can be enabled by setting a flag inside the driver on line 141.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_input_data_2">4.2. Input Data</h3>
<div class="paragraph">
<p>This driver takes the following input data:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 12. Input data for the hillslope length code</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Input data</th>
<th class="tableblock halign-left valign-top">Input type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Raw DEM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A raster named <code>&lt;prefix&gt;_DEM.flt</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The raw DEM to be analysed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Channel Heads</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Channel head raster named <code>&lt;prefix&gt;_DEM_CH.flt</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A file containing channel heads, which can be generated using the <a href="http://csdms.colorado.edu/wiki/Model:DrEICH_algorithm">DrEICH algorithm</a>. See the <a href="#Channel extraction">[Channel extraction]</a> chapter for more information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Floodplain Mask</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A binary mask of floodplains named <code>&lt;prefix&gt;_FloodPlain.flt</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Floodplain data which can be used to ensure that analysis only occurs on the
hillslopes. This is an optional input.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Surface Fitting Window Size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A float</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The surface fitting window size can be constrained using the steps outlined in <a href="#Selecting A Window Size">[Selecting A Window Size]</a>. This should be performed to ensure the
correct parameter values are selected.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_compile_the_driver_2">4.3. Compile The Driver</h3>
<div class="paragraph">
<p>The code is compiled using the provided makefile, <code>LH_Driver.make</code> and the command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ make -f LH_Driver.make</code></pre>
</div>
</div>
<div class="paragraph">
<p>Which will create the binary file, <code>LH_Driver.out</code> to be executed.</p>
</div>
</div>
<div class="sect2">
<h3 id="_run_the_hillslope_length_driver">4.4. Run The Hillslope Length Driver</h3>
<div class="paragraph">
<p>The driver is run with six arguments:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Path</dt>
<dd>
<p>The data path where the channel head file and DEM is stored. The output data
will be written here too.</p>
</dd>
<dt class="hdlist1">Prefix</dt>
<dd>
<p>The filename prefix, without an underscore. If the DEM is called <code>Oregon_DEM.flt</code>
the prefix would be <code>Oregon</code>. This will be used to give the output files a distinct identifier.</p>
</dd>
<dt class="hdlist1">Window Size</dt>
<dd>
<p>Radius in spatial units of kernel used in surface fitting. Selected using window_size.</p>
</dd>
<dt class="hdlist1">Stream Order</dt>
<dd>
<p><a href="http://en.wikipedia.org/wiki/Strahler_number">The Strahler number</a> of basins to be extracted. Typically
a value of 2 or 3 is used, to ensure a good balance between sampling density and basin area.</p>
</dd>
<dt class="hdlist1">Floodplain Switch</dt>
<dd>
<p>If a floodplain raster has been generated it can be added to the
channel network by setting this switch to <code>1</code>. This will ensure that hillslope traces terminate at the hillslope-fluvial
transition. If no floodplain raster is available, or required, this switch should be set to
<code>0</code>.</p>
</dd>
<dt class="hdlist1">Write Rasters Switch</dt>
<dd>
<p>When running this driver several derivative rasters can be generated
to explore the results spatially. If this is required, set this switch to <code>1</code>. To
avoid writing these files set the switch to <code>0</code>. The rasters which will be written are:</p>
<div class="ulist">
<ul>
<li>
<p>A pit filled DEM</p>
</li>
<li>
<p>Slope</p>
</li>
<li>
<p>Aspect</p>
</li>
<li>
<p>Curvature</p>
</li>
<li>
<p>Stream network</p>
</li>
<li>
<p>Drainage basins of the user defined order</p>
</li>
<li>
<p>Hilltop curvature</p>
</li>
<li>
<p>Hillslope length</p>
</li>
<li>
<p>Hillslope gradient, computed as relief/hillslope length</p>
</li>
<li>
<p>Relief</p>
</li>
<li>
<p>A hillshade of the DEM</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The syntax to run the driver on a unix machine is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ ./LH_Driver.out &lt;Path&gt; &lt;Prefix&gt; &lt;Window Radius&gt; &lt;Stream order&gt; &lt;Floodplain Switch&gt; &lt;Write Rasters Switch&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>And a complete example (your path and filenames will vary):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ ./LH_Driver.out /home/s0675405/DataStore/LH_tests/ Oregon 6 2 1 0</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_analysing_the_results">4.5. Analysing The Results</h3>
<div class="paragraph">
<p>The final outputs are stored in two plain text files, which are written to the data
folder supplied as the argument <code>path</code>.</p>
</div>
<div class="sect3">
<h4 id="_prefix_paper_data_txt">4.5.1. &lt;Prefix&gt;_Paper_Data.txt</h4>
<div class="paragraph">
<p>This file contains all of the basin average values for each basin, these files contain
a large number of columns, providing a wealth of basin average data. The columns in the
file, from left to right are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>BasinID =  Unique ID for the basin.</p>
</li>
<li>
<p>HFR_mean = Mean hilltop flow routing derived hillslope length.</p>
</li>
<li>
<p>HFR_median = Median hilltop flow routing derived hillslope length.</p>
</li>
<li>
<p>HFR_stddev = Standard deviation of hilltop flow routing derived hillslope length.</p>
</li>
<li>
<p>HFR_stderr = Standard error of hilltop flow routing derived hillslope length.</p>
</li>
<li>
<p>HFR_Nvalues = Number of values used in hilltop flow routing derived hillslope length.</p>
</li>
<li>
<p>HFR_range = Range of hilltop flow routing derived hillslope length.</p>
</li>
<li>
<p>HFR_min = Minimum hilltop flow routing derived hillslope length.</p>
</li>
<li>
<p>HFR_max = Maximum hilltop flow routing derived hillslope length.</p>
</li>
<li>
<p>SA_binned_LH = Hillslope length from binned slope area plot.</p>
</li>
<li>
<p>SA_Spline_LH = Hillslope length from spline curve in slope area plot.</p>
</li>
<li>
<p>LH_Density = Hillslope length from drainage density.</p>
</li>
<li>
<p>Area = Basin area.</p>
</li>
<li>
<p>Basin_Slope_mean = Mean basin slope.</p>
</li>
<li>
<p>Basin_Slope_median = Median basin slope.</p>
</li>
<li>
<p>Basin_Slope_stddev = Standard deviation of basin slope.</p>
</li>
<li>
<p>Basin_Slope_stderr = Standard error of basin slope.</p>
</li>
<li>
<p>Basin_Slope_Nvalues = Number of basin slope values.</p>
</li>
<li>
<p>Basin_Slope_range = Range of basin slopes.</p>
</li>
<li>
<p>Basin_Slope_min = Minimum basin slope.</p>
</li>
<li>
<p>Basin_Slope_max = Maximum basin slope.</p>
</li>
<li>
<p>Basin_elev_mean = Mean basin elevation.</p>
</li>
<li>
<p>Basin_elev_median = Median basin elevation.</p>
</li>
<li>
<p>Basin_elev_stddev = Standard deviation of basin elevation.</p>
</li>
<li>
<p>Basin_elev_stderr = Standard error of basin elevation.</p>
</li>
<li>
<p>Basin_elev_Nvalues = Number of basin elevation values.</p>
</li>
<li>
<p>Basin_elev_Range = Range of basin elevations.</p>
</li>
<li>
<p>Basin_elev_min = Minimum basin elevation.</p>
</li>
<li>
<p>Basin_elev_max = Maximum basin elevation.</p>
</li>
<li>
<p>Aspect_mean = Mean aspect of the basin.</p>
</li>
<li>
<p>CHT_mean = Mean hilltop curvature of the basin.</p>
</li>
<li>
<p>CHT_median = Median hilltop curvature of the basin.</p>
</li>
<li>
<p>CHT_stddev = Standard deviation of hilltop curvature of the basin.</p>
</li>
<li>
<p>CHT_stderr = Standard error of hilltop curvature of the basin.</p>
</li>
<li>
<p>CHT_Nvalues = Number of hilltop curvature values used.</p>
</li>
<li>
<p>CHT_range = Range of hilltop curvatures.</p>
</li>
<li>
<p>CHT_min = Minimum hilltop curvature in the basin.</p>
</li>
<li>
<p>CHT_max = Maximum hilltop curvature in the basin.</p>
</li>
<li>
<p>EStar = \(E*\) value from <a href="http://www.sciencedirect.com/science/article/pii/S0012821X07006061">Roering et al. (2007)</a>.</p>
</li>
<li>
<p>RStar = \(R*\) value from <a href="http://www.sciencedirect.com/science/article/pii/S0012821X07006061">Roering et al. (2007)</a>.</p>
</li>
<li>
<p>HT_Slope_mean = Mean slope calculated using (relief/hillslope length).</p>
</li>
<li>
<p>HT_Slope_median = Median slope calculated using (relief/hillslope length).</p>
</li>
<li>
<p>HT_Slope_stddev = Standard deviation of slope calculated using (relief/hillslope length).</p>
</li>
<li>
<p>HT_Slope_stderr = Standard error of slope calculated using (relief/hillslope length).</p>
</li>
<li>
<p>HT_Slope_Nvalues = Number of slope values calculated using (relief/hillslope length).</p>
</li>
<li>
<p>HT_Slope_range = Range of slopes calculated using (relief/hillslope length).</p>
</li>
<li>
<p>HT_Slope_min = Minimum slope calculated using (relief/hillslope length).</p>
</li>
<li>
<p>HT_Slope_max = Maximum slope calculated using (relief/hillslope length).</p>
</li>
<li>
<p>HT_relief_mean = Mean relief.</p>
</li>
<li>
<p>HT_relief_median = Median relief.</p>
</li>
<li>
<p>HT_relief_stddev = Standard deviation of relief.</p>
</li>
<li>
<p>HT_relief_stderr = Standard error of relief.</p>
</li>
<li>
<p>HT_relief_Nvalues = Number of relief values used.</p>
</li>
<li>
<p>HT_relief_range = Range of reliefs.</p>
</li>
<li>
<p>HT_relief_min = Minimum relief.</p>
</li>
<li>
<p>HT_relief_max = Maximum relief.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This file can be loaded and the data visualized using
<a href="http://github.com/sgrieve/LH_Paper_Plotting/tree/master/Analysis_Code">these python scripts</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_prefix_hilltopdata_csv">4.5.2. &lt;Prefix&gt;_HilltopData.csv</h4>
<div class="paragraph">
<p>This file contains hillslope metrics calculated for every hilltop pixel in the
dataset which was routed successfully to a stream pixel. The columns in the
file, from left to right are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>X is the x coordinate of the hilltop pixel.</p>
</li>
<li>
<p>Y is the x coordinate of the hilltop pixel.</p>
</li>
<li>
<p>hilltop_id is the value of the hilltop pixel.</p>
</li>
<li>
<p>S is the slope calculated as relief/hillslope length.</p>
</li>
<li>
<p>R is the relief, the change in elevation between the hilltop and the channel</p>
</li>
<li>
<p>Lh is the hillslope flow length.</p>
</li>
<li>
<p>BasinID is the junction outlet number of the basin the hilltop is within.</p>
</li>
<li>
<p>StreamID is the value of the stream pixel reached by the trace.</p>
</li>
<li>
<p>HilltopSlope is the gradient of the pixel hwere the trace started.</p>
</li>
<li>
<p>DivergentCountFlag is the count of divergent pixels crossed. <strong>Depreciated</strong></p>
</li>
<li>
<p>PlanarCountFlag - Count of planar cells crossed <strong>Depreciated</strong></p>
</li>
<li>
<p>E_Star = \(E*\) value from <a href="http://www.sciencedirect.com/science/article/pii/S0012821X07006061">Roering et al. (2007)</a>.</p>
</li>
<li>
<p>R_Star = \(R*\) value from <a href="http://www.sciencedirect.com/science/article/pii/S0012821X07006061">Roering et al. (2007)</a>.</p>
</li>
<li>
<p>EucDist - Euclidean length of the trace from hilltop to channel</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This file can be loaded and the data visualized using
<a href="http://github.com/sgrieve/LH_Paper_Plotting/tree/master/Analysis_Code">these python scripts</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_trace_files">4.5.3. Trace Files</h4>
<div class="paragraph">
<p>An optional switch can be set within the code to print out the coordinates of the path
of each trace, allowing hilltop flow paths to be visualized. This option is not exposed at the command line as it will considerably slow the execution of the algorithm.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This will generate a large number of text files, which some operating systems can struggle to handle.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To enable this feature open the driver file <code>LH_Driver.cpp</code> and find the following parameters which should be located around line 140:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">bool print_paths_switch = false;
int thinning = 1;
string trace_path = "";
bool basin_filter_switch = false;
vector&lt;int&gt; Target_Basin_Vector;</code></pre>
</div>
</div>
<div class="paragraph">
<p>These control the path file printing and give several options to limit the scope of the path printing to ensure a manageable number of files are generated. The possible values for each parameter are:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 13. Path file printing parameters</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Input type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>print_paths_switch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set this to <code>true</code> to print paths and <code>false</code> to not print paths (the default)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>thinning</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The default value of <code>1</code> will keep every trace, whereas any other value will thin the data and write every <code>nth</code> trace to a file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>trace_path</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The directory that the trace files will be written to, it is <strong>strongly</strong> recommended that this be an empty directory.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>basin_filter_switch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set this to <code>true</code> if you only want to write trace files contained within traget basins. <code>false</code> will process the whole DEM.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Target_Basin_Vector</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vector of ints</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <code>basin_filter_switch</code> is set to true, populate this vector with the IDs of the basins to be studied.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Once these parameters have been set, re-compile the driver following the steps in <a href="#_compile_the_driver">Compile The Driver</a> and run the code. Once the code has executed a large number of files will have been generated in the supplied path. They are plain text, space delimited files which have the following headings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>X Coordinate.</p>
</li>
<li>
<p>Y Coordinate.</p>
</li>
<li>
<p>Count of divergent pixels crossed during the trace.</p>
</li>
<li>
<p>Hillslope length.</p>
</li>
<li>
<p>Count of planar pixels crossed during the trace.</p>
</li>
<li>
<p>E_Star from <a href="http://www.sciencedirect.com/science/article/pii/S0012821X07006061">Roering et al. (2007)</a>.</p>
</li>
<li>
<p>R_Star from <a href="http://www.sciencedirect.com/science/article/pii/S0012821X07006061">Roering et al. (2007)</a>.</p>
</li>
<li>
<p>Euclidean length of trace.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A python script is provided to process these files into a shapefile, which can be viewed in any GIS package, or plotted using other python scripts provided. The python script to process these files is located <a href="http://github.com/sgrieve/LH_Paper_Plotting/tree/master/Analysis_Code">here</a> and is called <code>trace_process_1_1.py</code>. To run this file, alter the input path to point to where the trace files are stored, and then set the output path to a new directory which must already exist.</p>
</div>
<div class="paragraph">
<p>The line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">files = files[::100] # only processing every 100th trace for speed</code></pre>
</div>
</div>
<div class="paragraph">
<p>is used to thin the dataset to speed up processing, in case this was not performed earlier. Again, a value of <code>1</code> will keep all of the data, and any other integer will keep every <code>nth</code> file. Once the code has been executed a single shapefile will be produced in the user defined output directory.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_worked_example">4.6. Worked Example</h3>
<div class="paragraph">
<p>In this final section a typical hillslope length analysis will be performed from start to finish to demonstrate how to use this algorithm on real data. For this example we will use a very small section of Gabilan Mesa, to facilitate rapid processing.</p>
</div>
<div class="sect3">
<h4 id="_getting_the_data">4.6.1. Getting the data</h4>
<div class="paragraph">
<p>The data is located in the ExampleTopoDatasets repository. Firstly, we must create a new directory to store our topogrpahic data:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ mkdir data
$ pwd
/home/s0675405/LH/data/</code></pre>
</div>
</div>
<div class="paragraph">
<p>We will only take the data we need, which is the Gabilan Mesa DEM and the associated DrEICH channel head file, so we can use wget to download the data:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ wget https://github.com/LSDtopotools/ExampleTopoDatasets/raw/master/gabilan.bil
$ wget https://github.com/LSDtopotools/ExampleTopoDatasets/raw/master/gabilan.hdr
$ wget https://github.com/LSDtopotools/ExampleTopoDatasets/raw/master/gabilan_CH.bil
$ wget https://github.com/LSDtopotools/ExampleTopoDatasets/raw/master/gabilan_CH.hdr</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should now have the following files in your data folder:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ pwd
/home/s0675405/LH/data/
$ ls
gabilan.bil  gabilan_CH.bil  gabilan_CH.hdr  gabilan.hdr</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_getting_the_code">4.6.2. Getting The Code</h4>
<div class="paragraph">
<p>Next we need to download the code from the CSDMS repository where the latest stable version of the hilltop flow routing algorithm is located. This can again be downloaded using wget and it will come as a zipfile, which should be extracted into a separate folder to the data:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ wget https://github.com/csdms-contrib/Hilltop_flow_routing/archive/master.zip
$ unzip master.zip</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally we need to get the visualization python scripts so we can explore the data:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ wget https://github.com/sgrieve/LH_Paper_Plotting/archive/master.zip
$ unzip master.zip</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now we should have 3 folders, one with the data, one with the main c++ code and a third with the python code.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ ls
data  Hilltop_flow_routing-master  LH_Paper_Plotting-master</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_running_the_code">4.6.3. Running The Code</h4>
<div class="paragraph">
<p>We need to check that the filenames for our input and output data make sense in the <code>LH_Driver.cpp</code> file. Open the file in a text editor and look at the line which loads the DEM:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">LSDRaster DEM((path+filename+"_dem"), "flt");</code></pre>
</div>
</div>
<div class="paragraph">
<p>We are working with <code>bil</code> files, so need to change the <code>"flt"</code> to <code>"bil"</code>, which can be done with a simple search and replace within your text editor.</p>
</div>
<div class="paragraph">
<p>The code also expects our data to be tagged <code>*_dem</code> so lets rename our data files to make life simpler:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ pwd
/home/s0675405/LH/data
$ mv gabilan.bil gabilan_dem.bil
$ mv gabilan.hdr gabilan_dem.hdr
$ mv gabilan_CH.bil gabilan_dem_CH.bil
$ mv gabilan_CH.hdr gabilan_dem_CH.hdr
$ ls
gabilan_dem.bil  gabilan_dem_CH.bil  gabilan_dem_CH.hdr  gabilan_dem.hdr</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now we can navigate back to the directory where the driver and makefile are stored and make the driver:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ pwd
/home/s0675405/LH/Hilltop_flow_routing-master/driver_functions_GrieveLH2015
$ make -f LH_Driver.make
g++ -c -Wall -O3 -pg -g ../LSDParticle.cpp -o ../LSDParticle.o
g++ -c -Wall -O3 -pg -g ../LSDCRNParameters.cpp -o ../LSDCRNParameters.o
g++ -Wall -O3 -pg -g LH_Driver.o ../LSDMostLikelyPartitionsFinder.o ../LSDIndexRaster.o ../LSDRaster.o ../LSDFlowInfo.o ../LSDJunctionNetwork.o ../LSDIndexChannel.o ../LSDChannel.o ../LSDStatsTools.o ../LSDBasin.o ../LSDShapeTools.o ../LSDParticle.o ../LSDCRNParameters.o -o LH_Driver.out</code></pre>
</div>
</div>
<div class="paragraph">
<p>Some warnings may appear which can be ignored as long as the final few lines look something like they do above and the file <code>LH_Driver.out</code> is created.</p>
</div>
<div class="paragraph">
<p>The binary file can then be run using the desired input arguments</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">./LH_Driver.out /home/s0675405/LH/data/ gabilan 5 2 0 0</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once the code is completed it will print some data to the screen about the success rate of the traces. Due to the nature of real topography there will always be a small number of failed traces, traces which hit the edge of the DEM should also be rare, but these are excluded from analysis as they are truncated. If these values are very large relative to the stream count, which denotes traces which have successfully completed, there may be a problem with your input data. In the case of this worked example we get the following results:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">Hilltop count: 2170
Stream count: 2157
Fail count: 7
Uphill count: 0
Edge count: 6</code></pre>
</div>
</div>
<div class="paragraph">
<p>Returning to the data folder we can see the the two data files described earlier in this chapter have been written.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ pwd
/home/s0675405/LH/data
$ ls
gabilan_dem.bil     gabilan_dem_CH.hdr  gabilan_dreich__HilltopData.csv
gabilan_dem_CH.bil  gabilan_dem.hdr     gabilan_dreich_PaperData.txt</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_plotting_data">4.6.4. Plotting Data</h4>
<div class="paragraph">
<p>We can now load the data files into the python scripts to visualize the data. Firstly, we can make a histogram to view the distribution of hillslope length values for our landscape using the <code>RAW_LH_Hist.py</code> script. We need to update the plotting parameters to reflect our data, the following lines can be edited within the script using any text editor:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">#================ modifyable parameters start here ====================

#paths to the data and to save the figure to
path = '../../data/' #path to the folder contaning the hilltopdata files
filename = 'gabilan_dreich__HilltopData.csv'
figpath = path #path to save the final figures

#plot style parameters
xmax = 400
ymax = 40
xstep = 50
ystep = 10
title_move = 0.

#plot labels
location = 'Gabilan Mesa'

#================ modifyable parameters end here ====================</code></pre>
</div>
</div>
<div class="paragraph">
<p>The plot style parameters require a bit of trial and error to get the the correct axis limits, so the code may need to be executed several times. Once the parameters have been set the script can be run at the command line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">python RAW_LH_Hist.py</code></pre>
</div>
</div>
<div class="paragraph">
<p>Which produces a histogram within the data folder.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/LH_Hist_Raw.png" alt="Hillslope length histogram">
</div>
</div>
<div class="paragraph">
<p>This process can be repeated to run any of the plotting scripts provided with this package, as each has a similar interface.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_summary_2">4.7. Summary</h3>
<div class="paragraph">
<p>You should now be able to generate hillslope length data from high resolution topography.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_legacy_code_dimensionless_erosion_and_relief">5. Legacy code: Dimensionless Erosion and Relief</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The relationship between topographic relief and erosion rate can be used to interrogate dynamic forces which interact to shape the Earth&#8217;s surface. Roering et al. (2007) formulated a dimensionless relationship between relief (R*) and erosion rate (E*) which allows comparisons between landscapes of vastly differing forms. Hurst et al. (2013) used this technique to identify topographic uplift and decay along the Dragons Back Pressure Ridge, CA. However, in spite of its utility, it has always been a challenging method to implement. In this chapter we go through the steps required to generate E* R* data using <a href="https://lsdtopotools.github.io/">LSDTopoTools</a> from high resolution topography at a range of spatial scales, following Grieve et al. (2015).</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Quick guide if you already know what you are doing</div>
<div class="paragraph">
<p>Here is a quick overview of how to set up and run the code, if you have done it before:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Generate a channel head file for the landscape.</p>
</li>
<li>
<p>Run the hillslope lenth driver, following the  <a href="#Extracting Hillslope Lengths">[Extracting Hillslope Lengths]</a> chapter.</p>
</li>
<li>
<p>Compile the code with: <code>make -f E_STAR_R_STAR.make</code></p>
</li>
<li>
<p>Run the program <code>E_STAR_R_STAR.out</code> using the path (with trailing slash), the filename prefix, the minimum patch area in pixels, the minimum number of data points per basin and the basin order.</p>
</li>
<li>
<p>Analyze the resulting data files using <code>Plot_ER_Data.py</code>.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_get_the_code_for_dimensionless_erosion_and_relief_analysis">5.1. Get the code for dimensionless erosion and relief analysis</h3>
<div class="paragraph">
<p>Our code for E*R* analysis can be found in our GitHub repository.  This repository contains code for extracting channel networks, generating hillslope length data and processing this topographic data into a form which can be used to generate E* R* relationships.</p>
</div>
<div class="sect3">
<h4 id="_clone_the_github_repository">5.1.1. Clone the GitHub repository</h4>
<div class="paragraph">
<p>First navigate to the folder where you will keep the GitHub repository.  In this example it is called <code>/home/LSDTT_repositories</code>.  To navigate to this folder in a UNIX terminal use the <code>cd</code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ cd /home/LSDTT_repositories/</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can use the command <code>pwd</code> to check you are in the right folder.  Once you are in this folder, you can clone the repository from the <a href="https://github.com">GitHub website</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ pwd
/home/LSDTT_repositories/
$ git clone https://github.com/LSDtopotools/LSDTT_Hillslope_Analysis.git</code></pre>
</div>
</div>
<div class="paragraph">
<p>Navigate to this folder again using the <code>cd</code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ cd LSDTT_Hillslope_Analysis/</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_alternatively_get_the_zipped_code">5.1.2. Alternatively, get the zipped code</h4>
<div class="paragraph">
<p>If you don&#8217;t want to use <em>git</em>, you can download a zipped version of the code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ pwd
/home/LSDTT_repositories/
$ wget https://github.com/LSDtopotools/LSDTT_Hillslope_Analysis/archive/master.zip
$ gunzip master.zip</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<a href="https://github.com">GitHub</a> zips all repositories into a file called <code>master.zip</code>,
so if you previously downloaded a zipper repository this will overwrite it.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_get_the_python_code">5.1.3. Get the Python code</h4>
<div class="paragraph">
<p>In addition to the topographic analysis code, some python code is provided to handle the generation of the E* R* data and its visualization. This code is stored in a separate <a href="https://github.com">GitHub</a> repository which can be checked out in the same manner as before. It is a good idea to place the python code into a separate directory to avoid confusion later on.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ pwd
/home/LSDTT_repositories/
$ git clone https://github.com/sgrieve/ER_Star.git</code></pre>
</div>
</div>
<div class="paragraph">
<p>Navigate to this folder again using the <code>cd</code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ cd ER_STAR/</code></pre>
</div>
</div>
<div class="paragraph">
<p>or if you prefer to avoid <em>git</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ pwd
/home/LSDTT_repositories/
$ wget https://github.com/LSDtopotools/LSDTopoTools_ER_STAR/archive/master.zip
$ gunzip master.zip</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The python code has a number of dependences which you should check prior to trying to run the code, as it could give confusing error messages.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_checking_your_python_package_versions">5.1.4. Checking your Python package versions</h4>
<div class="paragraph">
<p>For the code to run correctly the following packages must be installed with a version number greater than or equal to the version number listed below. The code has only been tested on Python 2.7 using the listed versions of these packages, so if you experience unexpected behavior on a higher version, try installing the specified version.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">matplotlib</dt>
<dd>
<p>Version 1.43</p>
</dd>
<dt class="hdlist1">numpy</dt>
<dd>
<p>Verision 1.9.2</p>
</dd>
<dt class="hdlist1">scipy</dt>
<dd>
<p>Version 0.16.0</p>
</dd>
<dt class="hdlist1">uncertainties</dt>
<dd>
<p>Version 2.4.6</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>To test if you have a package installed, launch python at the terminal and try to import each package in turn. For example, to test if we have numpy installed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ python
Python 2.7.6 (default, Jun 22 2015, 18:00:18)
[GCC 4.8.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
&gt;&gt;&gt; import numpy
&gt;&gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If importing the package does nothing, that means it has worked, and we can now check the version of numpy</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">&gt;&gt;&gt; numpy.__version__
&gt;&gt;&gt; '1.9.2'</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case my version of numpy is new enough to run <code>Plot_ER_Data.py</code> without any problems. Repeat this test for each of the 4 packages and if any of them are not installed or are too old a version, it can be installed by using <code>pip</code> at the unix terminal or upgraded by using the <code>--upgrade</code> switch.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ sudo pip install &lt;package name&gt;
$ sudo pip install --upgrade &lt;package name&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_get_the_example_datasets">5.1.5. Get the example datasets</h4>
<div class="paragraph">
<p>We have provided some example datasets which you can use in order to test this algorithm. In this tutorial we will work using a LiDAR dataset and accompanying channel heads from Gabilan Mesa, California. You can get it from our ExampleTopoDatasets repository using <code>wget</code> and we will store the files in a folder called <code>data</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ pwd
/home/data
$ wget https://github.com/LSDtopotools/ExampleTopoDatasets/raw/master/gabilan.bil
$ wget https://github.com/LSDtopotools/ExampleTopoDatasets/raw/master/gabilan.hdr
$ wget https://github.com/LSDtopotools/ExampleTopoDatasets/raw/master/gabilan_CH.bil
$ wget https://github.com/LSDtopotools/ExampleTopoDatasets/raw/master/gabilan_CH.hdr</code></pre>
</div>
</div>
<div class="paragraph">
<p>This dataset is already in the preferred format for use with LSDTopoTools (the ENVI <code>bil</code> format). However the filenames are not structured in a manner which the code expects. Both the hillslope length driver and the E*R* driver expect files to follow the format <code>&lt;prefix&gt;_&lt;filetype&gt;.bil</code> so we should rename these four files to follow this format.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ pwd
/home/so675405/data
$ mv gabilan.bil gabilan_DEM.bil
$ mv gabilan.hdr gabilan_DEM.hdr
$ mv gabilan_CH.bil gabilan_DEM_CH.bil
$ mv gabilan_CH.hdr gabilan_DEM_CH.hdr
$ ls
gabilan_DEM.bil  gabilan_DEM_CH.bil  gabilan_DEM_CH.hdr  gabilan_DEM.hdr</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now the prefix for our data is <code>gabilan</code> and we are ready to look at the code itself.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_processing_high_resolution_topography">5.2. Processing High Resolution Topography</h3>
<div class="paragraph">
<p>The generation of E* R* data is built upon the ability to measure hillslope length and relief as spatially continuous variables across a landscape. This is performed by using the hillslope length driver outlined in the <a href="#Extracting Hillslope Lengths">[Extracting Hillslope Lengths]</a> chapter.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When running the hillslope length driver, ensure that the switch to write the rasters is set to <code>1</code> as these rasters are required by the <code>E_STAR_R_STAR.cpp</code> driver.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This driver performs the hilltop segmentation and data averaging needed to generate E* R* data at the scale of individual hilltop pixels, averaged at the hillslope scale and at a basin average scale.</p>
</div>
</div>
<div class="sect2">
<h3 id="_input_data_3">5.3. Input Data</h3>
<div class="paragraph">
<p>This driver takes the following input data:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 14. Input data for the <code>E_STAR_R_STAR.cpp</code> driver.</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Input data</th>
<th class="tableblock halign-left valign-top">Input type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Raw DEM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A raster named <code>&lt;prefix&gt;_DEM.flt</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The raw DEM to be analysed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hillslope length raster</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A raster named <code>&lt;prefix&gt;_HFR_LH.flt</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A raster of hillslope length measurements generated by <code>LH_Driver.cpp</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Topographic relief raster</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A raster named <code>&lt;prefix&gt;_Relief.flt</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A raster of topographic relief measurements generated by <code>LH_Driver.cpp</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hilltop curvature raster</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A raster named <code>&lt;prefix&gt;_CHT.flt</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A raster of hilltop curvature measurements generated by <code>LH_Driver.cpp</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Slope raster</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A raster named <code>&lt;prefix&gt;_Slope.flt</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A raster of topographic gradient generated by <code>LH_Driver.cpp</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum Patch Area</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The minimum number of pixels required for a hilltop to be used for spatial averaging.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum Number of Basin Data Points</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The minimum number of data points required for each basin average value to be computed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Basin Order</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://en.wikipedia.org/wiki/Strahler_number">The Strahler number</a> of basins to be extracted. Typically
a value of 2 or 3 is used, to ensure a good balance between sampling density and basin area.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_compile_the_driver_3">5.4. Compile The Driver</h3>
<div class="paragraph">
<p>Once you have generated the hillslope length data you must compile the <code>E_STAR_R_STAR.cpp</code> driver. This is performed by using the provided makefile, <code>LH_Driver.make</code> and the command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ make -f E_STAR_R_STAR.make</code></pre>
</div>
</div>
<div class="paragraph">
<p>Which will create the binary file, <code>E_STAR_R_STAR.out</code> to be executed.</p>
</div>
</div>
<div class="sect2">
<h3 id="_run_the_code_2">5.5. Run the code</h3>
<div class="paragraph">
<p>Once the driver has been compiled it can be run using the following arguments:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Path</dt>
<dd>
<p>The data path where the input data files are stored. The output data will be written here too.</p>
</dd>
<dt class="hdlist1">Prefix</dt>
<dd>
<p>The filename prefix, without an underscore. If the DEM is called <code>Oregon_DEM.flt</code>
the prefix would be <code>Oregon</code>. This will be used to give the output files a distinct identifier.</p>
</dd>
<dt class="hdlist1">Minimum Patch Area</dt>
<dd>
<p>The minimum number of pixels required for a hilltop to be used for spatial averaging.</p>
</dd>
<dt class="hdlist1">Minimum Number of Basin Data Points</dt>
<dd>
<p>The minimum number of data points required for each basin average value to be computed.</p>
</dd>
<dt class="hdlist1">Basin Order</dt>
<dd>
<p><a href="http://en.wikipedia.org/wiki/Strahler_number">The Strahler number</a> of basins to be extracted. Typically
a value of 2 or 3 is used, to ensure a good balance between sampling density and basin area.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>In our example we must navigate to the directory where the file was compiled and run the code, providing the five input arguments:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ pwd
/home/LSDTT_repositories/ER_Code_Package/Drivers
$ ./E_STAR_R_STAR.out /home/data/ gabilan 50 50 2</code></pre>
</div>
</div>
<div class="paragraph">
<p>A more general example of the input arguments would is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ ./E_STAR_R_STAR.out &lt;path to data files&gt; &lt;filename prefix&gt; &lt;min. patch area&gt; &lt;min. basin pixels&gt; &lt;basin order&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once the code has run, it will produce 5 output files, tagged with the input filename prefix. In the case of our example, these files are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>gabilan_E_R_Star_Raw_Data.csv</p>
</li>
<li>
<p>gabilan_E_R_Star_Patch_Data.csv</p>
</li>
<li>
<p>gabilan_E_R_Star_Basin_2_Data.csv</p>
</li>
<li>
<p>gabilan_Patches_CC.bil</p>
</li>
<li>
<p>gabilan_Patches_CC.hdr</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The three <code>.csv</code> files are the data files containing the raw, hilltop patch and basin average data which is used by <code>Plot_ER_Data.py</code> to generate the E* R* results. The <code>.bil</code> and accompanying <code>.hdr</code> files contain the hilltop network used for the spatial averaging of the data, with each hilltop coded with a unique ID. This can be used to check the spatial distribution of hilltops across the study site.</p>
</div>
</div>
<div class="sect2">
<h3 id="_analyzing_dimensionless_relationships">5.6. Analyzing Dimensionless Relationships</h3>
<div class="paragraph">
<p>Once the code has been run and the data has been generated, it can be processed using the Python script <code>Plot_ER_Data.py</code> which was downloaded into the directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ pwd
/home/LSDTT_repositories/ER_Star
$ ls
bin_data.py  Plot_ER_Data.py  Settings.py</code></pre>
</div>
</div>
<div class="paragraph">
<p>The three Python files are all needed to perform the E* R* analysis. The main code is contained within <code>Plot_ER_Data.py</code> and it makes use of <code>bin_data.py</code> to perform the binning of the data. The file <code>Settings.py</code> is the file that users should modify to run the code on their data.</p>
</div>
<div class="paragraph">
<p><code>Settings.py</code> is a large parameter file which must be modified to reflect our input data and the nature of the plots we want to generate. Each parameter is described within the file, but these descriptions are also produced here for clarity. It should be noted that a useful method for managing large sets of data and plotting permutations is to generate several <code>Settings.py</code> files and swapping between them as needed. The following tables outline all of the parameters which can be used to configure the E* R* plots.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 15. Paramter information to load data.</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter Name</th>
<th class="tableblock halign-left valign-top">Possible Values</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any valid path</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Must be wrapped in quotes with a trailing slash eg 'home/user/data/'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prefix</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filename prefix</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Must be wrapped in quotes and match the prefix used in <code>ER_STAR.cpp</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Order</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Basin order used in <code>ER_STAR.cpp</code> to extract the drainage basins. eg 1,2,5</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 16. Options to select data to be plotted</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter Name</th>
<th class="tableblock halign-left valign-top">Possible Values</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RawFlag</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 or 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use 1 to plot the raw data and 0 to not plot it.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DensityFlag</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use 0 to not plot the raw data as a density plot and 1 to plot a density plot. Values greater than 1 will be used the thin the data. For example 2 will plot every second point. Reccommended!</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BinFlag</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'raw', 'patches' or ''</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use 'raw' to bin the raw data, 'patches' to bin the hilltop patch data and an empty string, '' to not perform binning. Note that quotes are needed for all cases.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NumBins</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of bins to be generated. Must be an integer. eg 5,11,20. Will be ignored if <code>BinFlag</code> is left blank.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MinBinSize</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum number of data points required for a bin to be valid. eg 5,20,100. Will be ignored if <code>BinFlag</code> is left blank.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PatchFlag</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 or 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use 1 to plot the patch data and 0 to not plot it.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BasinFlag</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 or 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use 1 to plot the basin data and 0 to not plot it.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LandscapeFlag</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 or 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use 1 to plot the landscape average data and 0 to not plot it.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 17. Options controlling the fitting of the critical gradient</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter Name</th>
<th class="tableblock halign-left valign-top">Possible Values</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sc_Method</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A real number or 'raw', 'patches' or 'basins'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Either input a real number eg 0.8,1.2,1.052 to set the Sc value and avoid the fitting of Sc. Or select 'raw','patches' or 'basins' (including the quotes) to use the named dataset to constrain the best fit Sc value through bootstrapping.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NumBootsraps</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of iterations for the bootstrapping procedure. 10000 is the default, larger values will take longer to process.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 18. Options controlling the plot style</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter Name</th>
<th class="tableblock halign-left valign-top">Possible Values</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ErrorBarFlag</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True or False</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True to plot errorbars on datapoints, False to exclude them. Errorbars are generated as the standard error unless otherwise stated.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Format</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'png','pdf','ps','eps','svg'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">File format for the output E* R* plots. Must be one of: 'png','pdf','ps','eps','svg', including the quotes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GabilanMesa</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True or False</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True to plot the example data from <a href="http://www.sciencedirect.com/science/article/pii/S0012821X07006061">Roering et al. (2007)</a>, False to exclude it.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OregonCoastRange</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True or False</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True to plot the example data from <a href="http://www.sciencedirect.com/science/article/pii/S0012821X07006061">Roering et al. (2007)</a>, False to exclude it.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SierraNevada</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True or False</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True to plot the example data from <a href="http://onlinelibrary.wiley.com/doi/10.1029/2011JF002057/abstract">Hurst et al. (2012)</a>, False to exclude it.</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_density_plot">5.6.1. Density Plot</h4>
<div class="paragraph">
<p>Firstly we will generate a density plot from the raw E* R* data. To do this we must update the path to our data files, the prefix and the basin order so that our files can be loaded. These modifications can be done in any text editor.</p>
</div>
<div class="paragraph">
<p>As we want to display a density plot we must also place a value other than 0 for the <code>DensityFlag</code> parameter, and ensure that all other parameters in the second parameter table are set to 0 or in the case of <code>BinFlag</code>, an empty string ''.</p>
</div>
<div class="paragraph">
<p>We will set the critical gradient to a value of 0.8, to avoid running the bootstrapping calculations. <code>ErrorBarFlag</code> should be set to <code>False</code>, along with the example data options, and the file format can be left as the default value.</p>
</div>
<div class="paragraph">
<p>The below complete settings file has the comments removed for clarity, as these are not needed by the program.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python"># Parameters to load the data
Path = '/home/s0675405/data/'
Prefix = 'gabilan'
Order = 2

# Options to select data to be plotted
RawFlag = 0
DensityFlag = 1
BinFlag = ''
NumBins = 20
MinBinSize = 100
PatchFlag = 0
BasinFlag = 0
LandscapeFlag = 0

# Options regarding the fitting of the critical gradient
Sc_Method = 0.8
NumBootsraps = 100

# Plot style options
ErrorBarFlag = False
Format = 'png'

# Comparison data to be plotted from the other studies
GabilanMesa = False
OregonCoastRange = False
SierraNevada = False</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once the settings file has been generated, the code can be run from the terminal:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ python Plot_ER_Data.py</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will write a file called <code>gabilan_E_R_Star.png</code> to the data folder, which should look like this:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/gabilan_E_R_Star_density.png" alt="Density plot">
</div>
</div>
<div class="paragraph">
<p>This plot shows the density of the E* R* measurements for this test datatset, the data is quite sparse due to the small size of the input DEM, but the majority of data points still plot close to the steady state curve.</p>
</div>
</div>
<div class="sect3">
<h4 id="_hilltop_patch_plot">5.6.2. Hilltop Patch Plot</h4>
<div class="paragraph">
<p>Having completed the first example plot it becomes very simple to re-run the code to generate different plots. In this example we will plot the hilltop patch data points with error bars. To do this we need to change our settings file as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python"># Parameters to load the data
Path = '/home/s0675405/data/'
Prefix = 'gabilan'
Order = 2

# Options to select data to be plotted
RawFlag = 0
DensityFlag = 0
BinFlag = ''
NumBins = 20
MinBinSize = 100
PatchFlag = 1
BasinFlag = 0
LandscapeFlag = 0

# Options regarding the fitting of the critical gradient
Sc_Method = 0.8
NumBootsraps = 100

# Plot style options
ErrorBarFlag = True
Format = 'png'

# Comparison data to be plotted from the other studies
GabilanMesa = False
OregonCoastRange = False
SierraNevada = False</code></pre>
</div>
</div>
<div class="paragraph">
<p>This set of parameters generates a small number of hilltop patch data points which plot in similar locations as the raw data.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/gabilan_E_R_Star_patches.png" alt="Patch plot">
</div>
</div>
<div class="paragraph">
<p>To plot the basin average data, the same set of paramters would be used</p>
</div>
</div>
<div class="sect3">
<h4 id="_binned_plot">5.6.3. Binned Plot</h4>
<div class="paragraph">
<p>To bin the raw data, we need to set the <code>BinFlag</code> parameter to 'raw' and select a number of bins to place our data into:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python"># Parameters to load the data
Path = '/home/s0675405/data/'
Prefix = 'gabilan'
Order = 2

# Options to select data to be plotted
RawFlag = 0
DensityFlag = 0
BinFlag = 'raw'
NumBins = 20
MinBinSize = 100
PatchFlag = 0
BasinFlag = 0
LandscapeFlag = 0

# Options regarding the fitting of the critical gradient
Sc_Method = 0.8
NumBootsraps = 100

# Plot style options
ErrorBarFlag = True
Format = 'png'

# Comparison data to be plotted from the other studies
GabilanMesa = False
OregonCoastRange = False
SierraNevada = False</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case, the result is fairly meaningless, as most of the bins have too few data points to be plottted, but on larger datasets this method can highlight landscape transience very clearly.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/gabilan_E_R_Star_bins.png" alt="Binned plot">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_fitting_the_critical_gradient">5.6.4. Fitting The Critical Gradient</h4>
<div class="paragraph">
<p>The final example for this section is how to use the code to estimate the critical gradient of a landscape. This is performed by configuring the bootstrapping parameters and in this case we will use the patch data and 1000 iterations to compute the best fit critical gradient.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python"># Parameters to load the data
Path = '/home/s0675405/data/'
Prefix = 'gabilan'
Order = 2

# Options to select data to be plotted
RawFlag = 0
DensityFlag = 0
BinFlag = ''
NumBins = 20
MinBinSize = 100
PatchFlag = 1
BasinFlag = 0
LandscapeFlag = 0

# Options regarding the fitting of the critical gradient
Sc_Method = 'patches'
NumBootsraps = 1000

# Plot style options
ErrorBarFlag = True
Format = 'png'

# Comparison data to be plotted from the other studies
GabilanMesa = False
OregonCoastRange = False
SierraNevada = False</code></pre>
</div>
</div>
<div class="paragraph">
<p>It should be noted that on a small dataset such as this the fitting will not be very robust as there are too few data points, but this example should demonstrate how to run the code in this manner on real data. The best fit critical gradient will be printed at the top of the final plot.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/gabilan_E_R_Star_fit.png" alt="Best fit plot">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_summary_3">5.7. Summary</h3>
<div class="paragraph">
<p>By now you should be able to generate dimensionless erosion rate and relief data from high resolution topography.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2019-06-13 16:57:01 UTC
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains('stemblock')) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>