<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<meta name="author" content="Simon M. Mudd, University of Edinburgh">
<title>Visualisation of LSDTopoTools output</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Visualisation of LSDTopoTools output</h1>
<div class="details">
<span id="author" class="author">Simon M. Mudd, University of Edinburgh</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction_to_lsdtopotools_visualisation">1. Introduction to LSDTopoTools visualisation</a>
<ul class="sectlevel2">
<li><a href="#_should_i_use_a_gis_or_python">1.1. Should I use a GIS or python?</a></li>
</ul>
</li>
<li><a href="#_using_a_gis_to_look_at_lsdtopotools_data">2. Using a GIS to look at <strong>LSDTopoTools</strong> data</a>
<ul class="sectlevel2">
<li><a href="#_raster_data">2.1. Raster data</a></li>
<li><a href="#_vector_data">2.2. Vector data</a></li>
</ul>
</li>
<li><a href="#_installing_the_lsdtopotools_python_toolchain">3. Installing the LSDTopoTools python toolchain</a>
<ul class="sectlevel2">
<li><a href="#_easy_way_the_lsdtt_docker_visualisation_container">3.1. Easy way: The LSDTT docker visualisation container</a></li>
<li><a href="#_hard_way_native_linux_using_miniconda_and_an_environment">3.2. Hard way (native linux) using miniconda and an environment</a></li>
<li><a href="#_super_hard_way_setting_up_python_without_an_environment_file">3.3. Super hard way: setting up python without an environment file</a></li>
<li><a href="#_fixing_python_gdal_in_windows">3.4. Fixing python gdal in windows</a></li>
</ul>
</li>
<li><a href="#_basic_lsdtopotools_visualisation">4. Basic LSDTopoTools visualisation</a>
<ul class="sectlevel2">
<li><a href="#_getting_our_lsdmappingtools_and_other_tools">4.1. Getting our LSDMappingTools and other tools</a>
<ul class="sectlevel3">
<li><a href="#_starting_up_in_our_docker_container">4.1.1. Starting up in our docker container</a></li>
<li><a href="#_starting_up_in_a_native_python_environment">4.1.2. Starting up in a native python environment</a></li>
</ul>
</li>
<li><a href="#_a_note_on_the_test_datasets">4.2. A note on the test datasets</a></li>
<li><a href="#_your_first_lsdmappingtools_plots">4.3. Your first LSDMappingTools plots</a>
<ul class="sectlevel3">
<li><a href="#_a_basic_draped_hillshade">4.3.1. A basic draped hillshade</a></li>
<li><a href="#_a_hillshade_with_some_basins">4.3.2. A hillshade with some basins</a></li>
<li><a href="#_a_hillshade_with_some_channels">4.3.3. A hillshade with some channels</a></li>
<li><a href="#_what_these_basic_plots_do">4.3.4. What these basic plots do</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_lsdtopotools_visualisation_from_command_line">5. LSDTopoTools visualisation from command line</a>
<ul class="sectlevel2">
<li><a href="#_getting_the_example_data">5.1. Getting the example data</a>
<ul class="sectlevel3">
<li><a href="#_getting_example_data_in_a_docker_container">5.1.1. Getting example data in a docker container:</a></li>
<li><a href="#_getting_the_data_in_your_native_system">5.1.2. Getting the data in your native system</a></li>
</ul>
</li>
<li><a href="#_what_is_in_the_example_data">5.2. What is in the example data</a></li>
<li><a href="#_getting_lsdmappingtools">5.3. Getting LSDMappingTools</a></li>
<li><a href="#_a_slightly_different_way_to_make_plots">5.4. A slightly different way to make plots</a>
<ul class="sectlevel3">
<li><a href="#_the_basic_structure_of_a_plotbasicrasters_py_call">5.4.1. The basic structure of a PlotBasicRasters.py call</a></li>
<li><a href="#_a_basic_hillshade_using_plotbasicrasters_py">5.4.2. A basic hillshade using PlotBasicRasters.py</a></li>
<li><a href="#_making_a_basemap">5.4.3. Making a basemap</a></li>
</ul>
</li>
<li><a href="#_more_complex_plots_with_plotbasicrasters_py">5.5. More complex plots with PlotBasicRasters.py</a>
<ul class="sectlevel3">
<li><a href="#_a_basic_channel_plot_plotbasicrasters_py">5.5.1. A basic channel plot PlotBasicRasters.py</a></li>
<li><a href="#_plotting_basins">5.5.2. Plotting basins</a></li>
<li><a href="#_plotting_basins_and_channels">5.5.3. Plotting basins and channels</a></li>
</ul>
</li>
<li><a href="#_other_plotting_options">5.6. Other plotting options</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="images/LSD-logo.png" alt="LSD logo" width="200">
</div>
</div>
<div class="paragraph">
<p><a href="index.html">Return to main <strong>LSDTopoTools</strong> landing page</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction_to_lsdtopotools_visualisation">1. Introduction to LSDTopoTools visualisation</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>LSDTopoTools</strong> ingests data, digests it, and then produces gleaming, steaming new datasets. The number crunching that goes on inside of <strong>LSDTopoTools</strong> programs is there to help you understand your study area. But <strong>LSDTopoTools</strong> does not provide a graphical user interface: it just spits out numbers. Frequently these numbers are in binary format. To look at the data you need to <em>visualise</em> it.</p>
</div>
<div class="paragraph">
<p>There are two common ways to visualise data produced by <strong>LSDTopoTools</strong>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use a Geographic Information System (GIS). <a href="https://www.qgis.org/en/site/">QGIS</a> or <a href="http://desktop.arcgis.com/en/arcmap/">ArcMap</a> will do. The main difference betwen these packages is that one is free and open source (QGIS) and one is very very very expensive.  <strong>LSDTopoTools</strong> output is designed to be compatible with both of these GIS packages.</p>
</li>
<li>
<p>Use our python plotting packages, including <strong>LSDMappingTools</strong>. These live in <a href="https://github.com/LSDtopotools/LSDMappingTools">their own github repository</a>.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_should_i_use_a_gis_or_python">1.1. Should I use a GIS or python?</h3>
<div class="paragraph">
<p>If you are just starting out with <strong>LSDTopoTools</strong>, you probably want to use a nice, friendly GIS that has shiny buttons and icons and lets you pan and zoom and do all those nice things.</p>
</div>
<div class="paragraph">
<p>If you want to inspect individal data points you really need to use a GIS.</p>
</div>
<div class="paragraph">
<p>However, there are some disadvantages to using a GIS, which is why we wrote <a href="https://github.com/LSDtopotools/LSDMappingTools"><strong>LSDMappingTools</strong></a>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You have to click a bunch of buttons to get a certain formatting, and if you are loading diffent datasets there are more buttons to click. After you have done thousands of analyses requiring clicking each time, having to click these buttons begins to get very, very tedious. In fact it can get close to driving you mad and you might start muttering to strangers on the street or plants. Eventually you realise that you are clicking buttons so much that it would actually be more time efficient to learn the nuances of geospatial data visualisation using python than to keep clicking buttons. This leads you to write scripts to automate the visualisation process. This is not a hypothetical story, it acutally happened. <strong>LSDMappingTools</strong> automates plotting of <strong>LSDTopoTools</strong> output so you don&#8217;t have to click so many buttons.</p>
</li>
<li>
<p>You want to reproduce a plot. Because a GIS involves lots of presing of buttons and clicking of mice, it is difficult to reproduce the exact same figure twice. Have we mentioned how much we hate clicking buttons? Our philosophy is that science should be reproducible. So we have written scripts to guarantee that two users with the same data can produce <strong>exactly</strong> the same plot.</p>
</li>
<li>
<p>You want a plot that is formatted for a publication. Have you ever submitted a manuscript with figures that you have spent hours perfecting in Inkscape or Illustrator or iPaidAShittonToAppleGraphix and then reviewers ask you to change the figure or add some data? Isn&#8217;t that annoying? What if you wrote scripts where all the sizing, fonts, colouring, etc was exactly the way you want it so if the data changes you can just run a script again and you get a perfect figure without having to click buttons in Inkscape? We thought that would be great so we did it ourselves.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We now use <strong>LSDMappingTools</strong> regularly to make our figures. For some analyses, our plotting routines have been streamlined to the extent that you can get publication-ready figures in one python call. Sounds great, doesn&#8217;t it?</p>
</div>
<div class="paragraph">
<p>Well, there are some serious drawbacks to using python and <a href="https://github.com/LSDtopotools/LSDMappingTools"><strong>LSDMappingTools</strong></a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The scripts require loads of interdependant python packages. It means that not only is installation a pain but it also takes up a lot of space (you need to download about a GB of python packages to get everything working). We have, however, spent a lot of time experimenting with different installation techniques and we have settle on Docker since you can just <a href="https://hub.docker.com/r/lsdtopotools/lsdtt_viz_docker">grab the pre-built container from Docker Hub</a>. Loads of people are switching from languages like c++ to python since python is soooo easy to use and portable. We love python. It is easy to use. But I will throw my book "The c++ programming language" by Bjarne Stroustrup at anyone who claims that python is more portable than c++.</p>
</li>
<li>
<p>If things go wrong it helps a lot to be good at <a href="https://matplotlib.org/">Matplotlib</a>. This has a steep learning curve.</p>
</li>
<li>
<p>I am afraid our python repositories are a mess. Every now and then we try to clean these up but the documentation and organisation leave a lot to be desired. We are sorry about this.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you think you are going to be using <strong>LSDTopoTools</strong> frequently in your research or work we would recommend taking the time to get the python tools working. If you just need a single result for a simple problem (i.e., you just want drainge area or a channel network) then look at <strong>LSDTopoTools</strong> output in a GIS.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_a_gis_to_look_at_lsdtopotools_data">2. Using a GIS to look at <strong>LSDTopoTools</strong> data</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>LSDTopoTools</strong> outputs both raster and vector data. If you don&#8217;t know what those are please see our <a href="LSDTT_introduction_to_geospatial_data.html.html">section on geospatial data</a>.</p>
</div>
<div class="paragraph">
<p>If you want specific instructions for loading data please see our <a href="LSDTT_QGIS.html">QGIS section</a>.</p>
</div>
<div class="sect2">
<h3 id="_raster_data">2.1. Raster data</h3>
<div class="paragraph">
<p>Our raster datasets are in the <a href="http://www.harrisgeospatial.com/docs/ENVIImageFiles.html">ENVI bil</a> format. We like this format because it is simple but contains all the georeferencing information you need to load it into a GIS.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The ENVI bil format can be read by both ArcMap and <a href="https://www.qgis.org/en/site/">QGIS</a>.</p>
</li>
<li>
<p>You can convert it to other formats <a href="LSDTT_introduction_to_geospatial_data.html#_gdal">using GDAL</a>. Note that QGIS has GDAL built in.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_vector_data">2.2. Vector data</h3>
<div class="paragraph">
<p><strong>LSDTopoTools</strong> also produces vector data. This vector data is almost always point data. Points with locations and attributes are printed to file, and you need to get this into your GIS. <strong>LSDTopoTools</strong> outputs point data in two formats:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://en.wikipedia.org/wiki/Comma-separated_values">csv format</a>: This is comma separated value.</p>
<div class="ulist">
<ul>
<li>
<p>Most of our csv data files include the latitude and longitude of the points.</p>
</li>
<li>
<p>If you import csv data into a GIS, you need to tell it the coordinate system. <strong>If the csv file has latitude and longitude headers, the coordinate system is WGS-84 which is the same as <a href="http://spatialreference.org/ref/epsg/wgs-84/">EPSG:4326</a></strong></p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="http://geojson.org/">Geojson</a> format. Some of our <strong>LSDTopoTools</strong> programs allow you to convert csv files into geojson files.</p>
<div class="ulist">
<ul>
<li>
<p>Geojson files contain georeferencing, so you can load them as victor data directly into a GIS: you don&#8217;t need to tell the GIS what coordinate system the data is in.</p>
</li>
<li>
<p>Geojson data is also compatible with many web mapping formats, like <a href="https://d3js.org/">d3.js</a> or <a href="http://leafletjs.com/">leaflet</a>.</p>
</li>
<li>
<p>Unfortunately, Geojson files are <strong>huge</strong> so if you are processing big datasets and are writing geojson data you will very quickly end up filling your hard disk!</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installing_the_lsdtopotools_python_toolchain">3. Installing the LSDTopoTools python toolchain</h2>
<div class="sectionbody">
<div class="paragraph">
<p>So you have tried looking at <strong>LSDTopoTools</strong> output and are prepared to try our fancy python scripts. I am afraid before you can use these you are going to have to install our python toolchain.</p>
</div>
<div class="paragraph">
<p>There are two options for this:
* <strong>Easy way</strong> Get our <a href="https://hub.docker.com/r/lsdtopotools/lsdtt_viz_docker">docker visualisation container</a>
* <strong>Hard way</strong> install the conda environment using <a href="http://conda.pydata.org/miniconda.html">miniconda</a></p>
</div>
<div class="sect2">
<h3 id="_easy_way_the_lsdtt_docker_visualisation_container">3.1. Easy way: The LSDTT docker visualisation container</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You need to have LSDTT_installation.html#_installing_docker[Docker installed].</p>
</li>
<li>
<p>Pull and run the docker visualisation container:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ docker run -it -v C:\LSDTopoTools:/LSDTopoTools lsdtopotools/lsdtt_viz_docker</code></pre>
</div>
</div>
</li>
<li>
<p>Run a little script:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console"># Start_LSDTT.sh</code></pre>
</div>
</div>
</li>
<li>
<p>You need to navigate into the LSDMappingTools directory:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console"># cd /LSDTopoTools/LSDMappingTools</code></pre>
</div>
</div>
</li>
<li>
<p>You are ready to go!</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_hard_way_native_linux_using_miniconda_and_an_environment">3.2. Hard way (native linux) using miniconda and an environment</h3>
<div class="paragraph">
<p>This is a quick guide. There are many options for setting up python but this is our preferred setup.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download and install <a href="http://conda.pydata.org/miniconda.html">miniconda</a> on your host machine. You want the python 3 version for your operating system.</p>
</li>
<li>
<p>Open a command prompt (Windows) or terminal (Mac-OS or Linux)</p>
</li>
<li>
<p>Get our  <a href="https://github.com/LSDtopotools/LSDMappingTools/tree/master/conda_environments">environment file</a>. There are two you might use:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><code>python3_environment.yml</code> is for Linux but is possibly more portable.</p>
</li>
<li>
<p><code>LSDMT_version_0.2.2.txt</code> is a functioning version that works in a 64 bit Linux environment</p>
</li>
<li>
<p>If you are in Windows, try the <code>python3_environment.yml</code>. Otherwise, try the other one.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Download the appropriate file onto your computer.</p>
</li>
<li>
<p>Create the environment from that file with:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>If you are using <code>LSDMT_version_0.2.2.txt</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ conda create --name LSDMT --file LSDMT_version_0.2.1.txt</code></pre>
</div>
</div>
</li>
<li>
<p>If you are using <code>python3_environment.yml</code></p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ conda env create -f python3_environment.yml</code></pre>
</div>
</div>
<div class="paragraph">
<p>I&#8217;m afraid this will take a little while.</p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Activate the environment:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">&gt; activate LSDTT</code></pre>
</div>
</div>
</li>
<li>
<p>You also need to clone the LSDMappingTools repository. Make a directory for it an use:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git clone https://github.com/LSDtopotools/LSDMappingTools.git</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_super_hard_way_setting_up_python_without_an_environment_file">3.3. Super hard way: setting up python without an environment file</h3>
<div class="sidebarblock">
<div class="content">
<div class="title">If the environment file doesn&#8217;t work</div>
<div class="paragraph">
<p>If the environment file doesn&#8217;t work, you can set up an environment this way.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The python community is very active and packages get updated a lot. One of the packages we use is GDAL, which causes <strong>A LOT</strong> of conflicts. This means building an environment often fails if you just go with the default versions of packages. If you use the docker container or the environment files (instructions above), the python installation is guaranteed to work. We highly recommend installing the environment using those two methods unless you are a python expert.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
This is an alternative to the previous two sections! You don&#8217;t need to do this if you have either got the docker container or if you have used the environment file.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The best way to install python is <a href="http://conda.pydata.org/miniconda.html">miniconda</a>. Use the python 3 version.</p>
</li>
<li>
<p>Once you have installed  <a href="http://conda.pydata.org/miniconda.html">miniconda</a>, you can go into a command prompt (windows) or terminal (MacOS and Linux) and get the other stuff you need. To get the command prompt in windows look for the <strong>cmd.exe</strong> program.</p>
</li>
<li>
<p>You should create a python environment for <strong>LSDTopoTools</strong>. This will keep the <strong>LSDMappingTools</strong> dependencies separate from your other python installations so we don&#8217;t break your other python stuff. Read about <a href="https://conda.io/docs/user-guide/tasks/manage-environments.html">conda python environments here</a>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">&gt; conda create --name LSDTT
&gt; conda activate LSDTT</code></pre>
</div>
</div>
<div class="paragraph">
<p>After doing this you should see the name of the environment on your termial or command prompt:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">(LSDTT) &gt;</code></pre>
</div>
</div>
</li>
<li>
<p>Now we start by updating conda and adding a bunch of standard packages. There are specific versions in the following instructions because some of the packages are in conflict and we have got to a functioning version through a lot of painful experimentation so you don&#8217;t have to. Note that these instructions might go out of date but a functioning version can be scraped from <a href="https://hub.docker.com/r/lsdtopotools/lsdtt_viz_docker/dockerfile">our dockerfile</a></p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">&gt; conda install -y -c conda-forge conda=4.6.14
&gt; conda config --add channels conda-forge
&gt; conda config --set channel_priority strict
&gt; conda install -y git python=3.6.7
&gt; conda install numpy scipy matplotlib pandas</code></pre>
</div>
</div>
</li>
<li>
<p>Now install the geographic tools</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">&gt; conda install -y gdal geopandas shapely fiona rasterio pyproj cartopy descartes utm</code></pre>
</div>
</div>
</li>
<li>
<p>In Linux/MacOS, you should also be able to install <code>ffmpeg</code>, which we use to animate things.</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">&gt; conda install -y ffmpeg</code></pre>
</div>
</div>
</li>
<li>
<p>Every time you use our tools, you should activate the <strong>LSDTT</strong> python environment.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_fixing_python_gdal_in_windows">3.4. Fixing python gdal in windows</h3>
<div class="paragraph">
<p>If you are using windows, there is a stupid bug in the <strong>conda</strong> gdal package where it cannot find the gdal data (this was updated in 2018 so it might be fixed by now). To fix this:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Search for the file <strong>gcs.csv</strong>. Note the folder in which it is located. On my system it is in <code>C:\Miniconda2\Library\share\gdal</code></p>
</li>
<li>
<p>Go into the control panel, go to system (or system and security, then system), click on <strong>advanced system settings</strong> and in system variables enter a new variable: <strong>GDAL_DATA</strong>. For the value of this enter the directory where the gdal data is that you found above.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_basic_lsdtopotools_visualisation">4. Basic LSDTopoTools visualisation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Okay, we are going to take you through some basic visualisation using <strong>LSDMappingTools</strong>.</p>
</div>
<div class="sect2">
<h3 id="_getting_our_lsdmappingtools_and_other_tools">4.1. Getting our LSDMappingTools and other tools</h3>
<div class="paragraph">
<p>This repeats information from the <a href="#_installing_the_lsdtopotools_python_toolchain">python installation section</a>.</p>
</div>
<div class="paragraph">
<p>You can either use our <a href="https://hub.docker.com/r/lsdtopotools/lsdtt_viz_docker">Docker container</a> (easy) or install on your native system (more difficult and takes a long time).</p>
</div>
<div class="sect3">
<h4 id="_starting_up_in_our_docker_container">4.1.1. Starting up in our docker container</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If you are using our docker implementation (this is recommended), start the container and go to the correct folder:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ docker run -it -v C:\LSDTopoTools\:/LSDTopoTools lsdtopotools/lsdtt_viz_docker
# Start_LSDTT.sh
# cd /LSDTopoTools/LSDMappingTools/Tests</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_starting_up_in_a_native_python_environment">4.1.2. Starting up in a native python environment</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If you installed the LSDMT environment on your host machine:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">&gt; activate LSDTT</code></pre>
</div>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In windows you will need to be in a <code>cmd.exe</code> window.</p>
</li>
<li>
<p>In linux or MacOS you might need to type <code>source activate LSDTT</code> to get the environment to work.</p>
</li>
<li>
<p>If the environment is loaded you should see it in parentheses before the command prompt, e.g., <code>(LSDTT) &gt;</code> or <code>(LSDTT) $</code>.</p>
</li>
<li>
<p>Navigate to the folder in the <code>LSDMappingTools</code> repository called <code>Tests</code>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Call the <code>LSDMappingTools_test.py</code> python script. This script is called with a single number: 1,2 or 3. These make different plots.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_a_note_on_the_test_datasets">4.2. A note on the test datasets</h3>
<div class="paragraph">
<p>The examples in this section are all from the <a href="https://github.com/LSDtopotools/LSDMappingTools/tree/master/Tests"><code>Tests</code> folder in <strong>LSDMappingTools</strong></a>. The raster datasets are all in ENVI bil format, which include a <code>bil</code> file and a <code>hdr</code> file. The</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>WA.bil</code>: The topographic raster</p>
</li>
<li>
<p><code>WA_HS.bil</code>: hillshade</p>
</li>
<li>
<p><code>WA_AllBasins.bil</code>: A raster map of the basins</p>
</li>
<li>
<p><code>WA_all.csv</code>: A channel network generated by the <code>print_chi_data_maps: true</code> flag. See <a href="LSDTT_basic_usage.html#_getting_a_channel_network_with_more_information"><strong>LSDTopoTools</strong> basic usage documentation for details</a></p>
</li>
<li>
<p>A python script for testing some basic plots: <code>LSDMappingTools_test.py</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These datasets have all been generated by <strong>LSDTopoTools</strong>. You can read about how to generate them in the <a href="LSDTT_basic_usage.html"><strong>LSDTopoTools</strong> basic usage documentation</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_your_first_lsdmappingtools_plots">4.3. Your first LSDMappingTools plots</h3>
<div class="paragraph">
<p>The good news here is that installing the LSDTT python toolchain is more difficult than creating your first plot. If your python environment is working you are already most of the way there!</p>
</div>
<div class="paragraph">
<p>We will walk through this example using the command line. You need to use the operating system within which you installed the LSDTT python environment. If you don&#8217;t know what that is read the <a href="#_installing_the_lsdtopotools_python_toolchain">installation section</a>.</p>
</div>
<div class="paragraph">
<p>The first plots are really just to test if your environemnt is working. But we will give you a bit of information about how the scripts work after you produce the plots.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The scripts here print figures to files; you will not see a window with a figure pop up. Instead, after you run the scripts, look in the <code>Tests</code> directory and open the <code>png</code> files.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_a_basic_draped_hillshade">4.3.1. A basic draped hillshade</h4>
<div class="paragraph">
<p>To begin, you must either be in our docker container or you must have activated our python environment on your host machine. If you don&#8217;t know how to do that, read the installation instructions.</p>
</div>
<div class="paragraph">
<p>The first test creates a very basic draped hillshade. The "drape" is an elevation raster draped over a hillshade. For obvious reasons it needs a elevation raster and a hillshade raster:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console"># python LSDMappingTools_test.py 1</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/WA_hillshade.png" alt="Draped hillshade" width="300">
</div>
<div class="title">Figure 1. A simple draped hillshade</div>
</div>
</div>
<div class="sect3">
<h4 id="_a_hillshade_with_some_basins">4.3.2. A hillshade with some basins</h4>
<div class="paragraph">
<p>This creates a very basic hillshade with some basins plotted. It needs the elevation, hillshade, and basin raster, and a <code>_BasinInfo.csv</code> file (all of which are included in the test data folder):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console"># python LSDMappingTools_test.py 1</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/WA_coloured_basins.png" alt="Some basins" width="300">
</div>
<div class="title">Figure 2. A simple draped hillshade</div>
</div>
</div>
<div class="sect3">
<h4 id="_a_hillshade_with_some_channels">4.3.3. A hillshade with some channels</h4>
<div class="paragraph">
<p>This creates a very hillshade with a channel network. The channels come from a csv file that is derived from a chi data map. You can read about how to generate these in our <a href="LSDTT_basic_usage.html#_more_advanced_options_in_lsdtt_basicmetrics">LSDTT basic analysis documentation</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console"># python LSDMappingTools_test.py 1</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/WA_channels_by_basin.png" alt="Channels over a hillshade" width="300">
</div>
<div class="title">Figure 3. A simple draped hillshade</div>
</div>
</div>
<div class="sect3">
<h4 id="_what_these_basic_plots_do">4.3.4. What these basic plots do</h4>
<div class="paragraph">
<p>To understand what these basic plots are doing, we will highlight some of the basic elements of the script. You should have a basic understanding of python. If you don&#8217;t, we can recommend the extremely useful courses from either <a href="https://swcarpentry.github.io/python-novice-inflammation/">software carpentry</a> or <a href="https://www.codecademy.com/learn/learn-python">code academy</a>.</p>
</div>
<div class="paragraph">
<p>Firstly, we are going to import a package called <strong>LSDMapWrappers</strong>. This is a small package that automates the most basic plots: simple draped hillshades, basin plots and channel plots.</p>
</div>
<div class="paragraph">
<p>The lines of code below appear in the script <code>LSDMappingTools_test.py</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">import LSDMapWrappers as LSDMW</code></pre>
</div>
</div>
<div class="paragraph">
<p>Later in the script there are a few options:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">    if argv[0] == 1:
        print("Getting basic hillshade")
        LSDMW.SimpleHillshade(DataDir,DataFname)
    elif argv[0] == 2:
        print("Plotting some basins")
        LSDMW.PrintBasins(DataDir,DataFname)
    elif argv[0] == 3:
        print("Plotting the channels")
        LSDMW.PrintChannels(DataDir,DataFname)</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should see here that there are various types of plots from <a href="https://github.com/LSDtopotools/LSDMappingTools/tree/master/LSDMapWrappers"><strong>LSDMapWrappers</strong></a>. As it turns out each of these different basic plots has a number of options. For example, here is the code in  <a href="https://github.com/LSDtopotools/LSDMappingTools/tree/master/LSDMapWrappers"><strong>LSDMapWrappers</strong></a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">def SimpleHillshade(DataDirectory,Base_file, cmap = "jet", cbar_loc = "right", size_format = "ESURF", fig_format = "png", dpi = 250):
    """
    This function makes a shaded relief plot of the DEM with the basins coloured
    by the basin ID.
    Args:
        DataDirectory (str): the data directory with the m/n csv files
        Base_file (str): The prefix for the m/n csv files
        cmap (str or colourmap): The colourmap to use for the plot
        cbar_loc (str): where you want the colourbar. Options are none, left, right, top and botton. The colourbar will be of the elevation.
                        If you want only a hillshade set to none and the cmap to "gray"
        size_format (str): Either geomorphology or big. Anything else gets you a 4.9 inch wide figure (standard ESURF size)
        fig_format (str): An image format. png, pdf, eps, svg all valid
        dpi (int): The dots per inch of the figure
    Returns:
        Shaded relief plot. The elevation is also included in the plot.
    Author: FJC, SMM
    """</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can see that these functions take the directory of the data files, a <code>Base_file</code> which is the name of the base raster, and a bunch of other options that allow you to modify the figure. <strong>LSDMapWrappers</strong> assumes that different map layers have specific names (it sacrifices flexibility for ease) so if your base raster is called <code>WA.bil</code> then it expects the hillshade to be called <code>WA_HS.bil</code> and the basin raster to be called <code>WA_AllBasins.bil1</code>, for example.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_lsdtopotools_visualisation_from_command_line">5. LSDTopoTools visualisation from command line</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section we are going to use some more flexible tools which you call from a command line. If you work with <strong>LSDTopoTools</strong> and <strong>LSDMappingTools</strong> on a day to day basis, these are the scripts that you will call.</p>
</div>
<div class="sect2">
<h3 id="_getting_the_example_data">5.1. Getting the example data</h3>
<div class="paragraph">
<p>The data we will use in this section comes with the full <strong>LSDTopoTools</strong> example data.
These datasets are available in a repository: <a href="https://github.com/LSDtopotools/ExampleTopoDatasets" class="bare">https://github.com/LSDtopotools/ExampleTopoDatasets</a></p>
</div>
<div class="sect3">
<h4 id="_getting_example_data_in_a_docker_container">5.1.1. Getting example data in a docker container:</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Start the docker container:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ docker run -it -v C:\LSDTopoTools\:/LSDTopoTools lsdtopotools/lsdtt_viz_docker</code></pre>
</div>
</div>
</li>
<li>
<p>Run a script to grab and unpack the data:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ Get_LSDTT_example_data.sh</code></pre>
</div>
</div>
</li>
<li>
<p>The data for these examples is in <code>/LSDTopoTools/data/ExampleTopoDatasets/ChiAnalysisData/Meghalaya</code></p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_getting_the_data_in_your_native_system">5.1.2. Getting the data in your native system</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Find a place to put the data.</p>
</li>
<li>
<p>Download and unzip the data. In a terminal you would do this:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ wget https://github.com/LSDtopotools/ExampleTopoDatasets/archive/master.zip
$ unzip master.zip</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_what_is_in_the_example_data">5.2. What is in the example data</h3>
<div class="paragraph">
<p>There are many datasets in the example data, but in the directory you will be using, we will focus on a specific location.</p>
</div>
<div class="paragraph">
<p>The data is based on a series of catchements draining the southern side of the Shillong Plateau in India, one of the wettest places on Earth. The data we will use has been derived from using our <a href="LSDTT_chi_analysis.html">channel steepness tools</a>, but we won&#8217;t make you run the code, we simply provide the processed data.</p>
</div>
<div class="paragraph">
<p>These are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Mega_divide.bil</code>: The topographic raster</p>
</li>
<li>
<p><code>Mega_divide_hs.bil</code>: hillshade</p>
</li>
<li>
<p><code>Mega_divide_AllBasins.bil</code>: A raster map of the basins</p>
</li>
<li>
<p><code>Mega_divide_AllBasinsInfo.csv</code>: A comma separated value file that contains information about the basins. It is generated using the <code>print_basin_raster: true</code> option in our <a href="LSDTT_chi_analysis.html">chi mapping tools</a>.</p>
</li>
<li>
<p><code>Mega_divide_Maskedchi.bil</code>: A raster that contains the chi coordinates of this landscape.</p>
</li>
<li>
<p><code>Mega_divide_chi_data_map.csv</code>: A csv file containing information about the channel network. It contains information like the area location, stream order, basin number, source number and chi coordinate of the extracted channel network. This comes from using the <a href="LSDTT_chi_analysis.html">chi mapping tool</a> with the option <code>print_chi_data_maps: true</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_getting_lsdmappingtools">5.3. Getting LSDMappingTools</h3>
<div class="paragraph">
<p>You also need to get <a href="https://github.com/LSDtopotools/LSDTTMappingTools">LSDMappingTools</a>. See the section <a href="#_installing_the_lsdtopotools_python_toolchain">Installing the LSDTopoTools python toolchain</a>. Please don&#8217;t just skim that section, it contains important information that is essential for getting the tool working properly.</p>
</div>
<div class="paragraph">
<p>However, if you are in the Docker container, just update <strong>LSDMappingTools</strong> by running <code>Start_LSDTT.sh</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_a_slightly_different_way_to_make_plots">5.4. A slightly different way to make plots</h3>
<div class="paragraph">
<p>In the previous section, we made some plots by calling plotting routines in the package <code>LSDMapWrappers</code>. In this section we will use a command line tool to generate plots.</p>
</div>
<div class="paragraph">
<p>The command line tool is called <code>PlotBasicRasters.py</code> and you give it arguments to make plots. It wraps various functions that live within several <strong>LSDMappingTools</strong> packages.</p>
</div>
<div class="paragraph">
<p>It can be used as a general plotting tool but was primarily designed to interface with output from <strong>LSDTopoTools</strong>.</p>
</div>
<div class="paragraph">
<p>The name of this script, <code>PlotBasicRasters.py</code> is perhaps a bit misleading because in fact you can make a large number of plots including draped plots, plots that include basins, and channel profile plots.</p>
</div>
<div class="sect3">
<h4 id="_the_basic_structure_of_a_plotbasicrasters_py_call">5.4.1. The basic structure of a PlotBasicRasters.py call</h4>
<div class="paragraph">
<p><code>PlotBasicRasters.py</code> is called with a number of command line arguments. Once you are used to the syntax, you should also be able to use similar packages such as <code>PlotMOverNAnalysis.py</code> and <code>PlotLithoInfo.py</code>.</p>
</div>
<div class="paragraph">
<p>The main elements of a call are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The call to the actual python script: <code>python PlotBasicRasters.py</code></p>
</li>
<li>
<p>The directory of your data: <code>-dir \My\Data\Location</code></p>
</li>
<li>
<p>The prefix of the data files <code>-fname RasterPrefix</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After that, there are a number of different command line options. For example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>-PD True</code>: This creates a drape plot. It expects there to be a raster that has <code>_hs</code> after the raster prefix. So for example if your raster prefix is <code>Xian</code> you need a raster file <code>Xian.bil</code> and a hillshade raster <code>Xian_hs.bil</code></p>
</li>
<li>
<p><code>-PB True</code>: This creates a basin plot. It expects there to be a raster that has <code>_AllBasins</code> after the raster prefix. So for example if your raster prefix is <code>Xian</code> you need a raster file <code>Xian.bil</code> and a hillshade raster <code>Xian_AllBasins.bil</code>. In addition you need a <code>_BasinsInfo.csv</code> file. This is generated with basin printing functions in some of the <strong>LSDTopoTools</strong> programs.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_a_basic_hillshade_using_plotbasicrasters_py">5.4.2. A basic hillshade using PlotBasicRasters.py</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>First, you need to either <a href="#_starting_up_in_our_docker_container">start the docker container</a> or <a href="#_starting_up_in_a_native_python_environment">activate the LSDMT environment</a>, depending on what system you are using.</p>
</li>
<li>
<p>In the docker container, you can always get the latest version of <strong>LSDMappingTools</strong> using the startup script:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console"># Start_LSDTT.sh</code></pre>
</div>
</div>
</li>
<li>
<p>Now, go to the <strong>LSDMappingTools</strong> directory. In the docker container, this is always at <code>/LSDTopoTools/LSDMappingTools</code></p>
</li>
<li>
<p>You also need to look up the location of your data.</p>
</li>
<li>
<p>In this example  we are going to use more advanced example data. You will have needed to have followed <a href="#_getting_the_example_data">these instructions</a> first.</p>
</li>
<li>
<p>We have a lot of different example datasets so I am afraid the path to this data is a bit long winded. Sorry. It is <code>/LSDTopoTools/data/ExampleTopoDatasets/ChiAnalysisData/Meghalaya</code></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>If you are not in the docker container you will have a different path: hopefully you know where you put your data!</p>
</li>
</ol>
</div>
</li>
<li>
<p>So, lets start with a basic call to plot the elevation over a hillshade.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>I am going to assume you have used the docker container. Your system might differ so you&#8217;ll need to update the path names.</p>
</li>
<li>
<p>Here is the call:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ python PlotBasicRasters.py -dir /LSDTopoTools/data/ExampleTopoDatasets/ChiAnalysisData/Meghalaya -fname Mega_divide -drape_fname Mega_divide -PD True -dpi 100</code></pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>This prints a figure in the <strong>raster_plots</strong> directory. The resulting figure looks like:</p>
<div class="imageblock">
<div class="content">
<img src="images/Mega_divide_drape.png" alt="Draped elevation plot" width="300">
</div>
<div class="title">Figure 4. A simple draped elevation plot</div>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>The <code>-PD True</code> options turns on the drape plotting</p>
</li>
<li>
<p>The <code>-drape_fname Mega_divide</code> means that we will just drape the elevation over the hillshade.</p>
</li>
<li>
<p>The <code>-dpi 100</code> option means that the dots per inch of the figure will be 100.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Why don&#8217;t we alter this figure a bit. We can change the colourbar location, or the colourbar label, for example:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ python PlotBasicRasters.py -dir /LSDTopoTools/data/ExampleTopoDatasets/ChiAnalysisData/Meghalaya -fname Mega_divide -drape_fname Mega_divide -PD True -drape_cbar_label "Elevation (m)" -drape_cbar_loc bottom -dpi 100</code></pre>
</div>
</div>
<div class="paragraph">
<p>This figure includes some additional options:</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><code>-drape_cbar_label "Elevation (m)"</code> this option lets you change the name of the colourbar label.</p>
</li>
<li>
<p><code>-drape_cbar_loc bottom</code> this option allows you to move the colourbar. The options are <code>left</code>, <code>right</code>, <code>top</code>, <code>bottom</code>, and <code>none</code>.</p>
</li>
<li>
<p><code>drape_cmap jet</code> The sets the colourmap. See the matplotlib documentation for all the possibilities.   If you do a bit of googling you will find that in fact <em>jet</em> is a terrible colourbar which leads people to see patterns that aren&#8217;t there. You should consider a colourbar like <code>cubehelix</code>.</p>
<div class="paragraph">
<p>The figure looks like this:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Mega_divide_drape_v2.png" alt="Draped elevation plot" width="300">
</div>
<div class="title">Figure 5. A simple draped elevation plot, with some modifications.</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>You may wish to play with some of the two other flags and see the results:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><code>-fmt png</code> This sets the vigure format. Options are <code>svg</code>, <code>png</code>, <code>pdf</code>. Other amige formats will work, see <code>matplotlib</code> documentation for <code>savefig</code>.</p>
</li>
<li>
<p><code>-size ESURF</code> This sets the size of the figure. Or more accurately, the width of the figure. The <code>geomorphology</code> option is 6.25 inches wide (matplotlib uses inches as its length unit&#8230;&#8203;don&#8217;t send me nasty letters in support of the metric system). The <code>big</code> option is 16 inches wide. Everything else will default to the Copernicus (the publishing house for EGU journals) width of 4.92 inches.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_making_a_basemap">5.4.3. Making a basemap</h4>
<div class="paragraph">
<p>We made a hillshade! Great. But we don&#8217;t actually know where we are in the world. However there is an option to create a basemap to see where your raster is.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>To call the basemap image, you can use:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ python PlotBasicRasters.py -dir /LSDTopoTools/data/ExampleTopoDatasets/ChiAnalysisData/Meghalaya -fname Mega_divide -dpi 100 -BM True -bmrem 20</code></pre>
</div>
</div>
<div class="paragraph">
<p>The key flags here are:</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><code>-BM True</code> This flag simply turns on the basemap. The are printed into the directory <strong>basemap_plots</strong>.</p>
</li>
<li>
<p><code>-bmrem 20</code> This option sets how wide the image is. This is a multiple of the total width (or height, if that if greater) of the base raster.</p>
</li>
</ol>
</div>
</li>
<li>
<p>The figure looks like this:</p>
<div class="imageblock">
<div class="content">
<img src="images/Mega_divide_basemap.png" alt="Basemap plot" width="300">
</div>
<div class="title">Figure 6. A simple basemap.</div>
</div>
</li>
<li>
<p>You can also try to modify the latitude and longitude line spacing by mydifying the flag <code>-bmpsm 0.5</code>. This is a multiplier of how many lat-long lines you want in relation to the width of the map. It uses the smaller of the width and height of the basemap. Try varying this between 0.2 and 3 and see what happens.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_more_complex_plots_with_plotbasicrasters_py">5.5. More complex plots with PlotBasicRasters.py</h3>
<div class="sidebarblock">
<div class="content">
<div class="title">Reminder of basic call to PlotBasicRasters.py</div>
<div class="ulist">
<ul>
<li>
<p>First you need to be in the LSDTopoTools python environment. Read the section on <a href="#_getting_our_lsdmappingtools_and_other_tools">Getting our LSDMappingTools and other tools</a> and make sure you <code>activate</code> the LSDTT python environment.</p>
</li>
<li>
<p>The the components of a call are:</p>
<div class="ulist">
<ul>
<li>
<p>The call to the actual python script: <code>python PlotBasicRasters.py</code></p>
</li>
<li>
<p>The directory of your data: <code>-dir \My\Data\Location</code></p>
</li>
<li>
<p>The prefix of the data files <code>-fname RasterPrefix</code></p>
</li>
<li>
<p>Then any optional flags you want. To see your choices run <code>python PlotBasicRasters.py -h</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>We are now going to get a bit more complex and plot some basins and channels.
The structure of the python call remain the same, we just call different flags for <code>PlotBasicRasters.py</code>.</p>
</div>
<div class="sect3">
<h4 id="_a_basic_channel_plot_plotbasicrasters_py">5.5.1. A basic channel plot PlotBasicRasters.py</h4>
<div class="paragraph">
<p>In the first example we will create a very simple channel plot.</p>
</div>
<div class="paragraph">
<p>Simply call:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ python PlotBasicRasters.py -dir /LSDTopoTools/data/ExampleTopoDatasets/ChiAnalysisData/Meghalaya -fname Mega_divide -dpi 100 -PCh True</code></pre>
</div>
</div>
<div class="paragraph">
<p>The figure looks like this:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Mega_divide_channels_chi_channels_and_basins.png" alt="Channel plot" width="500">
</div>
<div class="title">Figure 7. A simple channel plot.</div>
</div>
<div class="paragraph">
<p>The default of this plot is to plot the channels coloured by elevation, using a blue colour scale. Like most features of <code>PlotBasicRasters.py</code> there are a number of flags that can modify this plot. Many of the options involve selecting basins. So we will explore basin selection next.</p>
</div>
</div>
<div class="sect3">
<h4 id="_plotting_basins">5.5.2. Plotting basins</h4>
<div class="paragraph">
<p>Channels conduct water, sediment and nutrients downslope, but they can also communicate tectonic signals upslope. In many landscapes they set the pace of landscape evolution. Channels are orgaonised into connected networks, contained within drainage basins.</p>
</div>
<div class="paragraph">
<p><strong>LSDTopoTools</strong> analyses frequently involve sorting and selecting drainage basins. <strong>LSDMappingTools</strong> is designed to ingest and use the drainage basin information produced by <strong>LSDTopoTools</strong>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>We can start with a very basic basin plot:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ python PlotBasicRasters.py -dir /LSDTopoTools/data/ExampleTopoDatasets/ChiAnalysisData/Meghalaya -fname Mega_divide -dpi 100 -PB True</code></pre>
</div>
</div>
</li>
<li>
<p>The resulting figure looks like this:</p>
<div class="imageblock">
<div class="content">
<img src="images/Mega_divide_basins_selected_basins.png" alt="A simple basin" width="500">
</div>
<div class="title">Figure 8. A simple basin plot.</div>
</div>
</li>
<li>
<p>The basin numbering is determined algorithmically, but you might want to rename your basins. To do this, you use the <code>-rename_dict</code> flag. This takes the form of a python dictionary. You have keys and values. Each key is the index of the basin (the number in the previous figure) and the value is the new name. These are separated by colons (<code>:</code>). To do multiple basins you separate these <code>key:value</code> pairs with commas. Here is an example:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ python PlotBasicRasters.py -dir /LSDTopoTools/data/ExampleTopoDatasets/ChiAnalysisData/Meghalaya -fname Mega_divide -dpi 100 -PB True -rename_dict 0:supa,1:dupa</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
when you include the <code>rename_dict</code> there should either be no spaces or the entire dictionary needs to be in quotation marks.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>The resulting figure looks like this</p>
<div class="imageblock">
<div class="content">
<img src="images/Mega_divide_basins_selected_basins_v2.png" alt="A simple basin with renamed basins" width="500">
</div>
<div class="title">Figure 9. A simple basin plot with renamed basins.</div>
</div>
</li>
<li>
<p>You can also select basins by using the <code>-basin_keys</code> flag. If you leave this blank, it assumes you want all basins. If you include a comma separated list, it only keeps the basins you have named. <strong>The basin indices used are the original, not renamed basin indices</strong>. That is, if you are using <code>-rename_dict</code> you need to keep track of the original indices of the basins.</p>
</li>
<li>
<p>An example is:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ python PlotBasicRasters.py -dir /LSDTopoTools/data/ExampleTopoDatasets/ChiAnalysisData/Meghalaya -fname Mega_divide -dpi 100 -PB True -rename_dict 0:supa,1:dupa -basin_keys 0,1,5,6</code></pre>
</div>
</div>
</li>
<li>
<p>Again, you must ensure there are no spaces in the list because if there are, the python code will assume this is a new flag and will crash. Here is what the figure looks like:</p>
<div class="imageblock">
<div class="content">
<img src="images/Mega_divide_basins_selected_basins_v3.png" alt="A simple basin" width="500">
</div>
<div class="title">Figure 10. A basin plot with selected basins with some renaming.</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_plotting_basins_and_channels">5.5.3. Plotting basins and channels</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The basin selection algorithms work with channel plotting as well. You can do this with the <code>-PCh</code> flag, or alternatively you can use the <code>-PBC</code> flag to have some semitransparent basins under the channels.</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ python PlotBasicRasters.py -dir /LSDTopoTools/data/ExampleTopoDatasets/ChiAnalysisData/Meghalaya -fname Mega_divide -dpi 100 -basin_keys 0,1,5,6 -PBC True</code></pre>
</div>
</div>
</li>
<li>
<p>The figure looks like:</p>
<div class="imageblock">
<div class="content">
<img src="images/Mega_divide_BChElevation_chi_channels_and_basins.png" alt="Selected channels" width="500">
</div>
<div class="title">Figure 11. A basin plot with selected basins with some renaming channels.</div>
</div>
</li>
<li>
<p>You can also change the colouring of the channels using a flag <code>-SimpleChFmt</code>. You can choose <code>elevation</code>, <code>drainage_area</code>, <code>source_key</code>, or <code>basin_key</code> to colour your channels. This works with both the <code>-PCh</code> and <code>-PBC</code> flags:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ python PlotBasicRasters.py -dir /LSDTopoTools/data/ExampleTopoDatasets/ChiAnalysisData/Meghalaya -fname Mega_divide -dpi 100 -basin_keys 0,1,5,6 -PBC True -SimpleChFmt source_key</code></pre>
</div>
</div>
</li>
<li>
<p>The figure looks like this:</p>
<div class="imageblock">
<div class="content">
<img src="images/Mega_divideBSourceKey_chi_channels_and_basins.png" alt="Selected channels" width="500">
</div>
<div class="title">Figure 12. A basin plot with selected basins with some renaming channels.</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_other_plotting_options">5.6. Other plotting options</h3>
<div class="paragraph">
<p>There are actually a large number of <strong>LSDMappingTools</strong> plotting options.
We are well aware that this package is rather messy. The plotting scripts that will probably be most useful are:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Some of the key python plotting routines</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name of routine</th>
<th class="tableblock halign-left valign-top">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PlotBasicRasters.py</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A number of basic plotting routines for rasters, basins, some chi profiles, basemap plots, and other functionality.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PlotChiAnalysis.py</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The plotting routines for plotting chi profiles. These routines are tunes to work with outputs from the <a href="LSDTT_chi_analysis.html">LSDTopoTools chi analysis routines</a>.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2018-08-29 16:40:46 UTC
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains('stemblock')) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>